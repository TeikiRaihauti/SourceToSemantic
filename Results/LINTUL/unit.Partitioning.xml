<?xml version="1.0" ?>
<ModelUnit modelid=".Partitioning (SIMPLACE LINTUL component)" name="Partitioning (SIMPLACE LINTUL component)" timestep="1" version="-">
	<Description>
		<Title>Partitioning (SIMPLACE LINTUL component)</Title>
		<Authors>Gunther Krauss; Andreas Enders; Thomas Gaiser</Authors>
		<Institution>Crop Science Group, University of Bonn, Katzenburgweg 5, 53115 Bonn, Germany</Institution>
		<URI>https://github.com/SIMPLACE/simplace-components/blob/master/src/net/simplace/sim/components/experimental/amei/Partitioning.java</URI>
		<Reference>-</Reference>
		<ExtendedDescription>Partitioning computes daily biomass allocation fractions to roots, leaves, stems, and storage organs within the SIMPLACE implementation of the LINTUL crop model. Baseline fractions are read from user-defined DVS-based partitioning tables (roots, leaves, stems, storage organs). On each day, the component modifies these fractions according to the dominant stress: (1) Drought stress (if TRANRF &lt; NitrogenNutritionIndex) increases the root fraction by a factor FRTMOD = max(1, 1/(TRANRF + 0.5)) and proportionally reduces shoot fractions so that all fractions sum to 1; (2) Nitrogen stress reduces the leaf fraction by FLVMOD = exp(-PartitionNStressReduction * (1 - NitrogenNutritionIndex)), reallocating the difference to stems, while roots and storage organ fractions follow their tables. This component implements the LINTUL-2 partitioning logic following van Oijen and Leffelaar (2008).</ExtendedDescription>
		<ShortDescription>SIMPLACE LINTUL component that allocates daily biomass to organs using DVS-based tables, adjusted for drought and nitrogen stress.</ShortDescription>
	</Description>
	<Inputs>
		<Input name="cPartitionNStressReduction" description="N Stress on Partitioning" inputtype="parameter" parametercategory="constant" datatype="DOUBLE" max="1" min="0" default="1" unit="-" uri="http://www.wurvoc.org/vocabularies/om-1.8/one"/>
		<Input name="cFRTTB" description="Fractions Table Root" inputtype="parameter" parametercategory="constant" datatype="DOUBLEARRAY" len="-" max="-" min="-" default="-" unit="-" uri="http://www.wurvoc.org/vocabularies/om-1.8/one"/>
		<Input name="cFLVTB" description="Fractions Table Leaves" inputtype="parameter" parametercategory="constant" datatype="DOUBLEARRAY" len="-" max="-" min="-" default="-" unit="-" uri="http://www.wurvoc.org/vocabularies/om-1.8/one"/>
		<Input name="cFSTTB" description="Fractions Table Stems" inputtype="parameter" parametercategory="constant" datatype="DOUBLEARRAY" len="-" max="-" min="-" default="-" unit="-" uri="http://www.wurvoc.org/vocabularies/om-1.8/one"/>
		<Input name="cFSOTB" description="Fractions Table Storage Organs" inputtype="parameter" parametercategory="constant" datatype="DOUBLEARRAY" len="-" max="-" min="-" default="-" unit="-" uri="http://www.wurvoc.org/vocabularies/om-1.8/one"/>
		<Input name="cRootsPartitioningTableDVS" description="DVS for fraction of total dry matter to roots (c.f. FRTTB)" inputtype="parameter" parametercategory="constant" datatype="DOUBLEARRAY" len="-" max="-" min="-" default="-" unit="-" uri="http://www.wurvoc.org/vocabularies/om-1.8/one"/>
		<Input name="cRootsPartitioningTableFraction" description="Fraction of total dry matter to roots as function of DVS (c.f. FRTTB)" inputtype="parameter" parametercategory="constant" datatype="DOUBLEARRAY" len="-" max="-" min="-" default="-" unit="-" uri="http://www.wurvoc.org/vocabularies/om-1.8/one"/>
		<Input name="cStemsPartitioningTableDVS" description="DVS for fraction of total dry matter to stems (c.f. FSTTB)" inputtype="parameter" parametercategory="constant" datatype="DOUBLEARRAY" len="-" max="-" min="-" default="-" unit="-" uri="http://www.wurvoc.org/vocabularies/om-1.8/one"/>
		<Input name="cStemsPartitioningTableFraction" description="Fraction of total dry matter to stems as function of DVS (c.f. FSTTB)" inputtype="parameter" parametercategory="constant" datatype="DOUBLEARRAY" len="-" max="-" min="-" default="-" unit="-" uri="http://www.wurvoc.org/vocabularies/om-1.8/one"/>
		<Input name="cStorageOrgansPartitioningTableDVS" description="DVS for fraction of total dry matter to storage organs (c.f. FSOTB)" inputtype="parameter" parametercategory="constant" datatype="DOUBLEARRAY" len="-" max="-" min="-" default="-" unit="-" uri="http://www.wurvoc.org/vocabularies/om-1.8/one"/>
		<Input name="cStorageOrgansPartitioningTableFraction" description="Fraction of total dry matter to storage organs as function of DVS (c.f. FSOTB)" inputtype="parameter" parametercategory="constant" datatype="DOUBLEARRAY" len="-" max="-" min="-" default="-" unit="-" uri="http://www.wurvoc.org/vocabularies/om-1.8/one"/>
		<Input name="cLeavesPartitioningTableDVS" description="DVS for fraction of total dry matter to leaves (c.f. FLVTB)" inputtype="parameter" parametercategory="constant" datatype="DOUBLEARRAY" len="-" max="-" min="-" default="-" unit="-" uri="http://www.wurvoc.org/vocabularies/om-1.8/one"/>
		<Input name="cLeavesPartitioningTableFraction" description="Fraction of total dry matter to leaves as function of DVS (c.f. FLVTB)" inputtype="parameter" parametercategory="constant" datatype="DOUBLEARRAY" len="-" max="-" min="-" default="-" unit="-" uri="http://www.wurvoc.org/vocabularies/om-1.8/one"/>
		<Input name="iDoSow" description="if Sowingdate reached fraction tables are initialized" inputtype="variable" variablecategory="exogenous" datatype="INT" max="1" min="0" default="0" unit="-" uri="http://www.wurvoc.org/vocabularies/om-1.8/one"/>
		<Input name="iTRANRF" description="Transpiration reduction factor" inputtype="variable" variablecategory="exogenous" datatype="DOUBLE" max="1" min="0" default="1" unit="-" uri="http://www.wurvoc.org/vocabularies/om-1.8/one"/>
		<Input name="iNitrogenNutritionIndex" description="Nitrogen Nutrition Index" inputtype="variable" variablecategory="exogenous" datatype="DOUBLE" max="1" min="0" default="1" unit="-" uri="http://www.wurvoc.org/vocabularies/om-1.8/one"/>
		<Input name="iDevStage" description="Development stage of the plant" inputtype="variable" variablecategory="exogenous" datatype="DOUBLE" max="3" min="0" default="0" unit="-" uri="http://www.wurvoc.org/vocabularies/om-1.8/one"/>
	</Inputs>
	<Outputs>
		<Output name="FractionRoot" description="Fraction part going to Root compartment" variablecategory="auxiliary" datatype="DOUBLE" max="1" min="0" unit="-" uri="http://www.wurvoc.org/vocabularies/om-1.8/one"/>
		<Output name="FractionLeaves" description="Fraction part going to Leaves compartment" variablecategory="auxiliary" datatype="DOUBLE" max="1" min="0" unit="-" uri="http://www.wurvoc.org/vocabularies/om-1.8/one"/>
		<Output name="FractionStems" description="Fraction part going to Stems compartment" variablecategory="auxiliary" datatype="DOUBLE" max="1" min="0" unit="-" uri="http://www.wurvoc.org/vocabularies/om-1.8/one"/>
		<Output name="FractionStorageOrgans" description="Fraction part going to Storage Organs compartment" variablecategory="auxiliary" datatype="DOUBLE" max="1" min="0" unit="-" uri="http://www.wurvoc.org/vocabularies/om-1.8/one"/>
	</Outputs>
	<Initialization name="init" language="cyml" filename="algo/pyx/init.pyx"/>
	<Function name="AFGEN" description="Piecewise linear interpolation over breakpoint tables; returns boundary values outside range." language="cyml" type="external" filename="algo/pyx/AFGEN.pyx"/>
	<Algorithm language="cyml" platform="" filename="algo/pyx/process.pyx"/>
	<Parametersets/>
	<Testsets>
		<Testset name="t_-" description="-">
			<Test name="t_-">
				<OutputValue name="-">-</OutputValue>
			</Test>
		</Testset>
	</Testsets>
</ModelUnit>
