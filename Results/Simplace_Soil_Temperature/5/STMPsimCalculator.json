{
    "metadata": {
        "Title": "STMP - Soil Temperature Model (SIMPLACE)",
        "Authors": "Andreas Enders; Gunther Krauss",
        "Institution": "Crop Science Group, Katzenburgweg 5, 53115 Bonn, Germany",
        "URI": "http://www.simplace.net",
        "DOI": "",
        "Extended description": "Calculates daily average soil temperature at the center of each soil layer using damping depth, soil bulk density, soil water content, previous day temperatures and soil surface temperature. Implements equations for damping depth (DD), maximum damping depth (DP), surface temperature (DST, DST0) and layer temperature update STMP = LAG*STMP0 + (1-LAG)*(FZ*(AVT-DST0)+DST0). Reference: Williams & Izaurralde (2005).",
        "Short description": "Soil temperature of soil layers calculated from climate and soil conditions.",
        "Model version": "-"
    },
    "init": {
        "name": "init",
        "firstLine": "Double[] Z = cSoilLayerDepth.getValue();",
        "lastLine": "pSoilLayerDepth.setValue(tz, this);"
    },
    "process": {
        "name": "process",
        "description": "Compute daily soil temperature profile and daily temperature change rates using damping depth, soil surface temperature and previous soil temperatures; write results to SoilTempArray and rSoilTempArrayRate.",
        "firstLine": "Double[] tZp = pSoilLayerDepth.getValue();",
        "lastLine": "SoilTempArray.setArrayValue(i, SoilTempArray.getValue()[i] + rSoilTempArrayRate.getValue()[i], this);"
    },
    "inputs": [
        {
            "name": "cSoilLayerDepth",
            "description": "Depth of soil layer",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "DOUBLEARRAY",
            "len": "-",
            "min": "0.03",
            "max": "20",
            "default": "-",
            "unit": "metre",
            "uri": "http://www.wurvoc.org/vocabularies/om-1.8/metre"
        },
        {
            "name": "cFirstDayMeanTemp",
            "description": "Mean air temperature on first day",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "-40",
            "max": "50",
            "default": "-",
            "unit": "degree_Celsius",
            "uri": "http://www.wurvoc.org/vocabularies/om-1.8/degree_Celsius"
        },
        {
            "name": "cAVT",
            "description": "Constant Temperature of deepest soil layer - use long term mean air temperature",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "-10",
            "max": "20",
            "default": "-",
            "unit": "degree_Celsius",
            "uri": "http://www.wurvoc.org/vocabularies/om-1.8/degree_Celsius"
        },
        {
            "name": "cABD",
            "description": "Mean bulk density",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "1.0",
            "max": "4.0",
            "default": "2.0",
            "unit": "tonne_per_cubic_metre",
            "uri": "http://www.wurvoc.org/vocabularies/om-1.8/tonne_per_cubic_metre"
        },
        {
            "name": "cDampingDepth",
            "description": "Initial value for damping depth of soil",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "1.5",
            "max": "20.0",
            "default": "6.0",
            "unit": "metre",
            "uri": "http://www.wurvoc.org/vocabularies/om-1.8/metre"
        },
        {
            "name": "iDoInitialize",
            "description": "Switch to re-initialize the model with initial values.",
            "inputtype": "variable",
            "category": "exogenous",
            "datatype": "BOOLEAN",
            "len": "-",
            "min": "-",
            "max": "-",
            "default": "false",
            "unit": "one",
            "uri": "http://www.wurvoc.org/vocabularies/om-1.8/one"
        },
        {
            "name": "iSoilWaterContent",
            "description": "Water content, sum of whole soil profile",
            "inputtype": "variable",
            "category": "exogenous",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "1.5",
            "max": "20",
            "default": "5.0",
            "unit": "millimetre",
            "uri": "http://www.wurvoc.org/vocabularies/om-1.8/millimetre"
        },
        {
            "name": "iSoilSurfaceTemperature",
            "description": "Temperature at soil surface",
            "inputtype": "variable",
            "category": "exogenous",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "1.5",
            "max": "20",
            "default": "-",
            "unit": "degree_Celsius",
            "uri": "http://www.wurvoc.org/vocabularies/om-1.8/degree_Celsius"
        },
        {
            "name": "SoilTempArray",
            "description": "Array of soil temperatures in layers ",
            "inputtype": "variable",
            "category": "state",
            "datatype": "DOUBLEARRAY",
            "len": "-",
            "min": "-40",
            "max": "50",
            "default": "-",
            "unit": "degree_Celsius",
            "uri": "http://www.wurvoc.org/vocabularies/om-1.8/degree_Celsius"
        },
        {
            "name": "rSoilTempArrayRate",
            "description": "Array of daily temperature change",
            "inputtype": "variable",
            "category": "rate",
            "datatype": "DOUBLEARRAY",
            "len": "-",
            "min": "-20",
            "max": "20",
            "default": "-",
            "unit": "degree_Celsius_per_day",
            "uri": "http://www.wurvoc.org/vocabularies/om-1.8/degree_Celsius_per_day"
        },
        {
            "name": "pSoilLayerDepth",
            "description": "Depth of soil layer plus additional depth",
            "inputtype": "variable",
            "category": "auxiliary",
            "datatype": "DOUBLEARRAY",
            "len": "-",
            "min": "0.03",
            "max": "20",
            "default": "-",
            "unit": "metre",
            "uri": "http://www.wurvoc.org/vocabularies/om-1.8/metre"
        }
    ],
    "outputs": [
        {
            "name": "SoilTempArray",
            "description": "Array of soil temperatures in layers ",
            "datatype": "DOUBLEARRAY",
            "category": "state",
            "len": "-",
            "min": "-40",
            "max": "50",
            "default": "-",
            "unit": "degree_Celsius",
            "uri": "http://www.wurvoc.org/vocabularies/om-1.8/degree_Celsius"
        },
        {
            "name": "rSoilTempArrayRate",
            "description": "Array of daily temperature change",
            "datatype": "DOUBLEARRAY",
            "category": "state",
            "len": "-",
            "min": "-20",
            "max": "20",
            "default": "-",
            "unit": "degree_Celsius_per_day",
            "uri": "http://www.wurvoc.org/vocabularies/om-1.8/degree_Celsius_per_day"
        }
    ],
    "functions": [
        {
            "name": "reInitialize",
            "description": "Reinitializes the model by calling init(). Called when iDoInitialize is true."
        }
    ],
    "tests": [
        {
            "name": "fillTestVariables (test index 0)",
            "description": "Single-component test: defines specific inputs for test case 0 and checks expected SoilTempArray after process.",
            "inputs": [
                {
                    "name": "cSoilLayerDepth",
                    "value": [
                        0.1,
                        0.5,
                        1.5
                    ]
                },
                {
                    "name": "cFirstDayMeanTemp",
                    "value": 15.0
                },
                {
                    "name": "cAVT",
                    "value": 9.0
                },
                {
                    "name": "cABD",
                    "value": 1.4
                },
                {
                    "name": "cDampingDepth",
                    "value": 6.0
                },
                {
                    "name": "iSoilWaterContent",
                    "value": 0.3
                },
                {
                    "name": "iSoilSurfaceTemperature",
                    "value": 6.0
                }
            ],
            "outputs": [
                {
                    "name": "SoilTempArray",
                    "value": [
                        13.624360856350041,
                        13.399968504634286,
                        12.599999999999845,
                        12.2,
                        11.4,
                        10.6,
                        9.799999999999999,
                        9.0
                    ]
                }
            ]
        }
    ]
}