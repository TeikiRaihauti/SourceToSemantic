{
    "init": {
        "name": "init"
    },
    "process": {
        "name": "process",
        "description": "Perform one daily update of the soil temperature profile, computing a dynamic damping depth and layer-wise temperature adjustment."
    },
    "inputs": [
        {
            "name": "cSoilLayerDepth",
            "description": "Depth to the bottom of each soil layer (m), ascending, length >= 1.",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "DOUBLELIST",
            "len": "-",
            "min": "-",
            "max": "-",
            "default": "-",
            "unit": "m",
            "uri": "-"
        },
        {
            "name": "cFirstDayMeanTemp",
            "description": "Mean air temperature on first day (°C), used for initial temperature profile.",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "-",
            "max": "-",
            "default": "-",
            "unit": "°C",
            "uri": "-"
        },
        {
            "name": "cDampingDepth",
            "description": "Initial (maximum) damping depth of soil (m), used for initialization.",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "-",
            "max": "-",
            "default": "-",
            "unit": "m",
            "uri": "-"
        },
        {
            "name": "cAVT",
            "description": "Long-term mean air temperature (°C), used as temperature at damping depth.",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "-",
            "max": "-",
            "default": "-",
            "unit": "°C",
            "uri": "-"
        },
        {
            "name": "iDoInitialize",
            "description": "If 1 (True), re-initialize state before processing; if 0 (False), use provided state.",
            "inputtype": "variable",
            "category": "exogenous",
            "datatype": "INT",
            "len": "-",
            "min": "0",
            "max": "1",
            "default": "-",
            "unit": "-",
            "uri": "-"
        },
        {
            "name": "cABD",
            "description": "Average soil bulk density of the profile (t m^-3).",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "-",
            "max": "-",
            "default": "-",
            "unit": "t m^-3",
            "uri": "-"
        },
        {
            "name": "iSoilWaterContent",
            "description": "Water stored in the soil profile at day t.",
            "inputtype": "variable",
            "category": "exogenous",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "-",
            "max": "-",
            "default": "-",
            "unit": "mm",
            "uri": "-"
        },
        {
            "name": "iSoilSurfaceTemperature",
            "description": "Current soil surface temperature (°C).",
            "inputtype": "variable",
            "category": "exogenous",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "-",
            "max": "-",
            "default": "-",
            "unit": "°C",
            "uri": "-"
        },
        {
            "name": "SoilTempArray",
            "description": "Current soil temperatures by layer (°C).",
            "inputtype": "variable",
            "category": "state",
            "datatype": "DOUBLELIST",
            "len": "-",
            "min": "-",
            "max": "-",
            "default": "-",
            "unit": "°C",
            "uri": "-"
        },
        {
            "name": "rSoilTempArrayRate",
            "description": "Current daily temperature change rates (°C/day).",
            "inputtype": "variable",
            "category": "state",
            "datatype": "DOUBLELIST",
            "len": "-",
            "min": "-",
            "max": "-",
            "default": "-",
            "unit": "°C/day",
            "uri": "-"
        },
        {
            "name": "pSoilLayerDepth",
            "description": "Depth to the bottom of each (possibly extended) soil layer (m).",
            "inputtype": "variable",
            "category": "state",
            "datatype": "DOUBLELIST",
            "len": "-",
            "min": "-",
            "max": "-",
            "default": "-",
            "unit": "m",
            "uri": "-"
        }
    ],
    "outputs": [
        {
            "name": "SoilTempArray",
            "description": "Updated soil temperatures by layer (°C).",
            "datatype": "DOUBLELIST",
            "category": "state",
            "len": "-",
            "min": "-",
            "max": "-",
            "default": "-",
            "unit": "°C",
            "uri": "-"
        },
        {
            "name": "rSoilTempArrayRate",
            "description": "Updated daily temperature change rates (°C/day).",
            "datatype": "DOUBLELIST",
            "category": "state",
            "len": "-",
            "min": "-",
            "max": "-",
            "default": "-",
            "unit": "°C/day",
            "uri": "-"
        },
        {
            "name": "pSoilLayerDepth",
            "description": "Possibly re-initialized layer depths (m).",
            "datatype": "DOUBLELIST",
            "category": "state",
            "len": "-",
            "min": "-",
            "max": "-",
            "default": "-",
            "unit": "m",
            "uri": "-"
        }
    ],
    "functions": [
        {
            "name": "-",
            "description": "-"
        }
    ],
    "tests": [
        {
            "name": "test_STMPsimCalculator_case0",
            "description": "Initialization followed by one daily update; verifies SoilTempArray values.",
            "inputs": [
                {
                    "name": "cSoilLayerDepth",
                    "value": [
                        0.1,
                        0.5,
                        1.5
                    ]
                },
                {
                    "name": "cFirstDayMeanTemp",
                    "value": 15.0
                },
                {
                    "name": "cAVT",
                    "value": 9.0
                },
                {
                    "name": "cABD",
                    "value": 1.4
                },
                {
                    "name": "cDampingDepth",
                    "value": 6.0
                },
                {
                    "name": "iSoilWaterContent",
                    "value": 0.3
                },
                {
                    "name": "iSoilSurfaceTemperature",
                    "value": 6.0
                },
                {
                    "name": "iDoInitialize",
                    "value": 0
                }
            ],
            "outputs": [
                {
                    "name": "SoilTempArray",
                    "value": [
                        13.624360856350041,
                        13.399968504634286,
                        12.599999999999845,
                        12.2,
                        11.4,
                        10.6,
                        9.799999999999999,
                        9.0
                    ]
                }
            ]
        }
    ],
    "comments": [
        {
            "comment": "State variables (SoilTempArray, rSoilTempArrayRate, pSoilLayerDepth) are both inputs and outputs. The layer vector may be extended during initialization to reach the damping depth. iDoInitialize is treated as an exogenous control flag and encoded as INT (0/1) due to schema lacking a boolean type. Array lengths are dynamic and depend on configuration; thus len/min/max are unspecified."
        }
    ]
}