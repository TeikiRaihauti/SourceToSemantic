{
    "init": {
        "name": "STEMP_EPIC_SEASINIT"
    },
    "process": {
        "name": "STEMP_EPIC",
        "description": "Daily EPIC soil temperature process."
    },
    "inputs": [
        {
            "name": "ISWWAT",
            "description": "Soil water switch ('Y' or 'N')",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "CHAR",
            "len": "-",
            "min": "-",
            "max": "-",
            "default": "-",
            "unit": "-",
            "uri": "-"
        },
        {
            "name": "BD",
            "description": "Bulk density by layer",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "DOUBLELIST",
            "len": "NLAYR",
            "min": "-",
            "max": "-",
            "default": "-",
            "unit": "-",
            "uri": "-"
        },
        {
            "name": "DLAYR",
            "description": "Layer thickness by layer",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "DOUBLELIST",
            "len": "NLAYR",
            "min": "-",
            "max": "-",
            "default": "-",
            "unit": "cm",
            "uri": "-"
        },
        {
            "name": "DS",
            "description": "Cumulative depth by layer",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "DOUBLELIST",
            "len": "NLAYR",
            "min": "-",
            "max": "-",
            "default": "-",
            "unit": "cm",
            "uri": "-"
        },
        {
            "name": "DUL",
            "description": "Drained upper limit by layer",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "DOUBLELIST",
            "len": "NLAYR",
            "min": "-",
            "max": "-",
            "default": "-",
            "unit": "-",
            "uri": "-"
        },
        {
            "name": "LL",
            "description": "Lower limit by layer",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "DOUBLELIST",
            "len": "NLAYR",
            "min": "-",
            "max": "-",
            "default": "-",
            "unit": "-",
            "uri": "-"
        },
        {
            "name": "NLAYR",
            "description": "Number of soil layers",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "INT",
            "len": "-",
            "min": "-",
            "max": "-",
            "default": "-",
            "unit": "-",
            "uri": "-"
        },
        {
            "name": "SW",
            "description": "Soil water content by layer",
            "inputtype": "variable",
            "category": "exogenous",
            "datatype": "DOUBLELIST",
            "len": "NLAYR",
            "min": "-",
            "max": "-",
            "default": "-",
            "unit": "-",
            "uri": "-"
        },
        {
            "name": "TAVG",
            "description": "Daily average air temperature",
            "inputtype": "variable",
            "category": "exogenous",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "-",
            "max": "-",
            "default": "-",
            "unit": "degC",
            "uri": "-"
        },
        {
            "name": "TMAX",
            "description": "Daily maximum air temperature",
            "inputtype": "variable",
            "category": "exogenous",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "-",
            "max": "-",
            "default": "-",
            "unit": "degC",
            "uri": "-"
        },
        {
            "name": "TMIN",
            "description": "Daily minimum air temperature",
            "inputtype": "variable",
            "category": "exogenous",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "-",
            "max": "-",
            "default": "-",
            "unit": "degC",
            "uri": "-"
        },
        {
            "name": "TAV",
            "description": "Mean annual air temperature",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "-",
            "max": "-",
            "default": "-",
            "unit": "degC",
            "uri": "-"
        },
        {
            "name": "RAIN",
            "description": "Daily rainfall",
            "inputtype": "variable",
            "category": "exogenous",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "-",
            "max": "-",
            "default": "-",
            "unit": "mm",
            "uri": "-"
        },
        {
            "name": "DEPIR",
            "description": "Daily irrigation depth",
            "inputtype": "variable",
            "category": "exogenous",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "-",
            "max": "-",
            "default": "-",
            "unit": "mm",
            "uri": "-"
        },
        {
            "name": "BIOMAS",
            "description": "Standing biomass",
            "inputtype": "variable",
            "category": "exogenous",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "-",
            "max": "-",
            "default": "-",
            "unit": "kg/ha",
            "uri": "-"
        },
        {
            "name": "MULCHMASS",
            "description": "Surface mulch mass",
            "inputtype": "variable",
            "category": "exogenous",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "-",
            "max": "-",
            "default": "-",
            "unit": "kg/ha",
            "uri": "-"
        },
        {
            "name": "SNOW",
            "description": "Snow water equivalent",
            "inputtype": "variable",
            "category": "exogenous",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "-",
            "max": "-",
            "default": "-",
            "unit": "mm",
            "uri": "-"
        },
        {
            "name": "CUMDPT",
            "description": "Cumulative soil depth",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "-",
            "max": "-",
            "default": "-",
            "unit": "mm",
            "uri": "-"
        },
        {
            "name": "DSMID",
            "description": "Depth to soil layer midpoint",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "DOUBLELIST",
            "len": "NLAYR",
            "min": "-",
            "max": "-",
            "default": "-",
            "unit": "mm",
            "uri": "-"
        },
        {
            "name": "TDL",
            "description": "Total water at DUL across layers",
            "inputtype": "variable",
            "category": "state",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "-",
            "max": "-",
            "default": "-",
            "unit": "cm",
            "uri": "-"
        },
        {
            "name": "TMA",
            "description": "5-day memory (X2 series) used by EPIC",
            "inputtype": "variable",
            "category": "state",
            "datatype": "DOUBLELIST",
            "len": "5",
            "min": "-",
            "max": "-",
            "default": "-",
            "unit": "degC",
            "uri": "-"
        },
        {
            "name": "NDays",
            "description": "Number of days in wet-day window (max 30)",
            "inputtype": "variable",
            "category": "state",
            "datatype": "INT",
            "len": "-",
            "min": "0",
            "max": "30",
            "default": "-",
            "unit": "-",
            "uri": "-"
        },
        {
            "name": "WetDay",
            "description": "Wet-day flags over last 30 days",
            "inputtype": "variable",
            "category": "state",
            "datatype": "INTARRAY",
            "len": "30",
            "min": "0",
            "max": "1",
            "default": "-",
            "unit": "-",
            "uri": "-"
        },
        {
            "name": "X2_PREV",
            "description": "Previous X2 moving average",
            "inputtype": "variable",
            "category": "state",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "-",
            "max": "-",
            "default": "-",
            "unit": "degC",
            "uri": "-"
        },
        {
            "name": "SRFTEMP",
            "description": "Surface soil temperature",
            "inputtype": "variable",
            "category": "state",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "-",
            "max": "-",
            "default": "-",
            "unit": "degC",
            "uri": "-"
        },
        {
            "name": "ST",
            "description": "Soil temperature by layer",
            "inputtype": "variable",
            "category": "state",
            "datatype": "DOUBLELIST",
            "len": "NLAYR",
            "min": "-",
            "max": "-",
            "default": "-",
            "unit": "degC",
            "uri": "-"
        }
    ],
    "outputs": [
        {
            "name": "TDL",
            "description": "Total water at DUL across layers after update",
            "datatype": "DOUBLE",
            "category": "state",
            "len": "-",
            "min": "-",
            "max": "-",
            "default": "-",
            "unit": "cm",
            "uri": "-"
        },
        {
            "name": "TMA",
            "description": "Updated 5-day memory (X2 series)",
            "datatype": "DOUBLELIST",
            "category": "state",
            "len": "5",
            "min": "-",
            "max": "-",
            "default": "-",
            "unit": "degC",
            "uri": "-"
        },
        {
            "name": "NDays",
            "description": "Updated wet-day window length",
            "datatype": "INT",
            "category": "state",
            "len": "-",
            "min": "0",
            "max": "30",
            "default": "-",
            "unit": "-",
            "uri": "-"
        },
        {
            "name": "WetDay",
            "description": "Updated wet-day flags",
            "datatype": "INTARRAY",
            "category": "state",
            "len": "30",
            "min": "0",
            "max": "1",
            "default": "-",
            "unit": "-",
            "uri": "-"
        },
        {
            "name": "X2_PREV",
            "description": "Updated previous X2 moving average",
            "datatype": "DOUBLE",
            "category": "state",
            "len": "-",
            "min": "-",
            "max": "-",
            "default": "-",
            "unit": "degC",
            "uri": "-"
        },
        {
            "name": "SRFTEMP",
            "description": "Updated surface soil temperature",
            "datatype": "DOUBLE",
            "category": "state",
            "len": "-",
            "min": "-",
            "max": "-",
            "default": "-",
            "unit": "degC",
            "uri": "-"
        },
        {
            "name": "ST",
            "description": "Updated soil temperature by layer",
            "datatype": "DOUBLELIST",
            "category": "state",
            "len": "NLAYR",
            "min": "-",
            "max": "-",
            "default": "-",
            "unit": "degC",
            "uri": "-"
        },
        {
            "name": "X2_AVG",
            "description": "Current 5-day average of X2",
            "datatype": "DOUBLE",
            "category": "state",
            "len": "-",
            "min": "-",
            "max": "-",
            "default": "-",
            "unit": "degC",
            "uri": "-"
        }
    ],
    "functions": [
        {
            "name": "_fortran_nint",
            "description": "Nearest-integer rounding with ties away from zero (Fortran NINT behavior)."
        },
        {
            "name": "SOILT_EPIC",
            "description": "Core EPIC soil temperature profile update for surface and layers."
        }
    ],
    "tests": [
        {
            "name": "test_STEMP_EPIC_smoke",
            "description": "Smoke test derived from ASKEE_DSSAT_EPIC.for example; runs init and one daily step.",
            "inputs": [
                {
                    "name": "ISWWAT",
                    "value": "Y"
                },
                {
                    "name": "NLAYR",
                    "value": 4
                },
                {
                    "name": "BD",
                    "value": [
                        1.6,
                        1.6,
                        1.6,
                        1.6
                    ]
                },
                {
                    "name": "DLAYR",
                    "value": [
                        10.0,
                        10.0,
                        10.0,
                        10.0
                    ]
                },
                {
                    "name": "DS",
                    "value": [
                        10.0,
                        20.0,
                        30.0,
                        40.0
                    ]
                },
                {
                    "name": "DUL",
                    "value": [
                        0.3,
                        0.3,
                        0.3,
                        0.3
                    ]
                },
                {
                    "name": "LL",
                    "value": [
                        0.2,
                        0.2,
                        0.2,
                        0.2
                    ]
                },
                {
                    "name": "SW",
                    "value": [
                        0.2,
                        0.2,
                        0.2,
                        0.2
                    ]
                },
                {
                    "name": "TAVG",
                    "value": 25.0
                },
                {
                    "name": "TMAX",
                    "value": 30.0
                },
                {
                    "name": "TMIN",
                    "value": 20.0
                },
                {
                    "name": "TAV",
                    "value": 20.0
                },
                {
                    "name": "MULCHMASS",
                    "value": 0.0
                },
                {
                    "name": "SNOW",
                    "value": 0.0
                },
                {
                    "name": "X2_PREV",
                    "value": 0.0
                },
                {
                    "name": "RAIN",
                    "value": 0.0
                },
                {
                    "name": "DEPIR",
                    "value": 0.0
                },
                {
                    "name": "BIOMAS",
                    "value": 0.0
                }
            ],
            "outputs": [
                {
                    "name": "SRFTEMP",
                    "value": "-"
                },
                {
                    "name": "ST",
                    "value": "-"
                },
                {
                    "name": "CUMDPT",
                    "value": "-"
                },
                {
                    "name": "DSMID",
                    "value": "-"
                }
            ]
        }
    ],
    "comments": [
        {
            "comment": "STEMP_EPIC_SEASINIT is treated as the initialization function; STEMP_EPIC is the single daily process function."
        },
        {
            "comment": "CUMDPT and DSMID are computed in initialization and then used unchanged in the daily step; they are documented here as constant parameters of the daily process."
        },
        {
            "comment": "TDL is updated in STEMP_EPIC by adding the layer sum (DUL*DLAYR) each call; this matches the provided code, though it may be unconventional."
        },
        {
            "comment": "Units are taken from docstrings where specified (e.g., cm, mm, degC); otherwise left unspecified ('-')."
        },
        {
            "comment": "Outputs list reflects returns from the main process function; X2_AVG is returned but not used as an input on the next call."
        }
    ]
}