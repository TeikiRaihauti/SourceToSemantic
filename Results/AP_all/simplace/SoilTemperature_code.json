{
    "init": {
        "name": "init"
    },
    "process": {
        "name": "process",
        "description": "Main step function: updates soil/surface temperatures and energy balance over sub-daily iterations; computes radiation, boundary layer conductance, thermal properties, and updates state arrays."
    },
    "inputs": [
        {
            "name": "weather_Tav",
            "description": "Average annual air temperature",
            "inputtype": "variable",
            "category": "exogenous",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "-",
            "max": "-",
            "default": "-",
            "unit": "degC",
            "uri": "-"
        },
        {
            "name": "weather_Amp",
            "description": "Annual temperature amplitude",
            "inputtype": "variable",
            "category": "exogenous",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "-",
            "max": "-",
            "default": "-",
            "unit": "degC",
            "uri": "-"
        },
        {
            "name": "weather_Latitude",
            "description": "Site latitude",
            "inputtype": "variable",
            "category": "exogenous",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "-",
            "max": "-",
            "default": "-",
            "unit": "deg",
            "uri": "-"
        },
        {
            "name": "clock_Today_DayOfYear",
            "description": "Day of year",
            "inputtype": "variable",
            "category": "exogenous",
            "datatype": "INT",
            "len": "-",
            "min": "1",
            "max": "366",
            "default": "-",
            "unit": "day",
            "uri": "-"
        },
        {
            "name": "microClimate_CanopyHeight",
            "description": "Canopy height driver",
            "inputtype": "variable",
            "category": "exogenous",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "-",
            "max": "-",
            "default": "-",
            "unit": "-",
            "uri": "-"
        },
        {
            "name": "physical_Thickness",
            "description": "Layer thicknesses",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "DOUBLELIST",
            "len": "-",
            "min": "0",
            "max": "-",
            "default": "-",
            "unit": "-",
            "uri": "-"
        },
        {
            "name": "physical_BD",
            "description": "Layer bulk density",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "DOUBLELIST",
            "len": "-",
            "min": "0",
            "max": "-",
            "default": "-",
            "unit": "g/cm3 or similar",
            "uri": "-"
        },
        {
            "name": "physical_Rocks",
            "description": "Rock fraction per layer (%)",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "DOUBLELIST",
            "len": "-",
            "min": "0",
            "max": "100",
            "default": "-",
            "unit": "%",
            "uri": "-"
        },
        {
            "name": "physical_ParticleSizeSand",
            "description": "Sand fraction per layer (%)",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "DOUBLELIST",
            "len": "-",
            "min": "0",
            "max": "100",
            "default": "-",
            "unit": "%",
            "uri": "-"
        },
        {
            "name": "physical_ParticleSizeSilt",
            "description": "Silt fraction per layer (%)",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "DOUBLELIST",
            "len": "-",
            "min": "0",
            "max": "100",
            "default": "-",
            "unit": "%",
            "uri": "-"
        },
        {
            "name": "physical_ParticleSizeClay",
            "description": "Clay fraction per layer (%)",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "DOUBLELIST",
            "len": "-",
            "min": "0",
            "max": "100",
            "default": "-",
            "unit": "%",
            "uri": "-"
        },
        {
            "name": "organic_Carbon",
            "description": "Organic carbon per layer (%)",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "DOUBLELIST",
            "len": "-",
            "min": "0",
            "max": "100",
            "default": "-",
            "unit": "%",
            "uri": "-"
        },
        {
            "name": "waterBalance_SW",
            "description": "Soil water (layer-based) from water balance",
            "inputtype": "variable",
            "category": "exogenous",
            "datatype": "DOUBLELIST",
            "len": "-",
            "min": "0",
            "max": "1",
            "default": "-",
            "unit": "vol/vol",
            "uri": "-"
        },
        {
            "name": "pInitialValues",
            "description": "Initial soil temperature values (top layers)",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "DOUBLELIST",
            "len": "-",
            "min": "-",
            "max": "-",
            "default": "-",
            "unit": "degC",
            "uri": "-"
        },
        {
            "name": "DepthToConstantTemperature",
            "description": "Depth to constant temperature (used for phantom nodes)",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "0",
            "max": "-",
            "default": "-",
            "unit": "-",
            "uri": "-"
        },
        {
            "name": "timestep",
            "description": "External model time step length",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "0",
            "max": "-",
            "default": "-",
            "unit": "s",
            "uri": "-"
        },
        {
            "name": "latentHeatOfVapourisation",
            "description": "Latent heat of vaporisation",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "0",
            "max": "-",
            "default": "-",
            "unit": "-",
            "uri": "-"
        },
        {
            "name": "stefanBoltzmannConstant",
            "description": "Stefan-Boltzmann constant",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "0",
            "max": "-",
            "default": "5.67e-8 (SI) if SI; varies in code units",
            "unit": "-",
            "uri": "-"
        },
        {
            "name": "airNode",
            "description": "Index of air node",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "INT",
            "len": "-",
            "min": "0",
            "max": "-",
            "default": "-",
            "unit": "index",
            "uri": "-"
        },
        {
            "name": "surfaceNode",
            "description": "Index of surface node",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "INT",
            "len": "-",
            "min": "0",
            "max": "-",
            "default": "-",
            "unit": "index",
            "uri": "-"
        },
        {
            "name": "topsoilNode",
            "description": "Index of topsoil node",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "INT",
            "len": "-",
            "min": "0",
            "max": "-",
            "default": "-",
            "unit": "index",
            "uri": "-"
        },
        {
            "name": "numPhantomNodes",
            "description": "Number of phantom nodes below profile",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "INT",
            "len": "-",
            "min": "0",
            "max": "-",
            "default": "0",
            "unit": "-",
            "uri": "-"
        },
        {
            "name": "constantBoundaryLayerConductance",
            "description": "Constant boundary layer conductance when source='constant'",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "0",
            "max": "-",
            "default": "-",
            "unit": "-",
            "uri": "-"
        },
        {
            "name": "numIterationsForBoundaryLayerConductance",
            "description": "Iterations for stability correction coupling",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "INT",
            "len": "-",
            "min": "0",
            "max": "-",
            "default": "0",
            "unit": "-",
            "uri": "-"
        },
        {
            "name": "defaultTimeOfMaximumTemperature",
            "description": "Default hour of day for Tmax",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "0",
            "max": "24",
            "default": "-",
            "unit": "h",
            "uri": "-"
        },
        {
            "name": "defaultInstrumentHeight",
            "description": "Default instrument height for wind/temperature",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "0",
            "max": "-",
            "default": "-",
            "unit": "-",
            "uri": "-"
        },
        {
            "name": "bareSoilRoughness",
            "description": "Bare soil roughness height",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "0",
            "max": "-",
            "default": "-",
            "unit": "-",
            "uri": "-"
        },
        {
            "name": "instrumHeight",
            "description": "Provided instrument height",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "0",
            "max": "-",
            "default": "-",
            "unit": "-",
            "uri": "-"
        },
        {
            "name": "pom",
            "description": "Particle organic matter density parameter",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "0",
            "max": "-",
            "default": "2.5 typically",
            "unit": "-",
            "uri": "-"
        },
        {
            "name": "nu",
            "description": "Implicit scheme weighting (0..1)",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "0",
            "max": "1",
            "default": "1",
            "unit": "-",
            "uri": "-"
        },
        {
            "name": "boundarLayerConductanceSource",
            "description": "Boundary layer conductance source ('constant' or 'calc')",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "CHAR",
            "len": "-",
            "min": "-",
            "max": "-",
            "default": "constant",
            "unit": "-",
            "uri": "-"
        },
        {
            "name": "netRadiationSource",
            "description": "Net radiation source ('calc' or 'eos')",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "CHAR",
            "len": "-",
            "min": "-",
            "max": "-",
            "default": "calc",
            "unit": "-",
            "uri": "-"
        },
        {
            "name": "MissingValue",
            "description": "Missing value sentinel",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "-",
            "max": "-",
            "default": "-999",
            "unit": "-",
            "uri": "-"
        },
        {
            "name": "soilConstituentNames",
            "description": "List of soil constituent names used for mixture properties",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "CHAR",
            "len": "-",
            "min": "-",
            "max": "-",
            "default": "['OrganicMatter','Sand','Silt','Clay','Water','Air','Ice','Rocks','Minerals']",
            "unit": "-",
            "uri": "-"
        },
        {
            "name": "weather_MinT",
            "description": "Daily minimum air temperature",
            "inputtype": "variable",
            "category": "exogenous",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "-",
            "max": "-",
            "default": "-",
            "unit": "degC",
            "uri": "-"
        },
        {
            "name": "weather_MaxT",
            "description": "Daily maximum air temperature",
            "inputtype": "variable",
            "category": "exogenous",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "-",
            "max": "-",
            "default": "-",
            "unit": "degC",
            "uri": "-"
        },
        {
            "name": "weather_MeanT",
            "description": "Daily mean air temperature",
            "inputtype": "variable",
            "category": "exogenous",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "-",
            "max": "-",
            "default": "-",
            "unit": "degC",
            "uri": "-"
        },
        {
            "name": "weather_AirPressure",
            "description": "Air pressure",
            "inputtype": "variable",
            "category": "exogenous",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "0",
            "max": "-",
            "default": "-",
            "unit": "hPa",
            "uri": "-"
        },
        {
            "name": "weather_Wind",
            "description": "Wind speed at instrument height",
            "inputtype": "variable",
            "category": "exogenous",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "0",
            "max": "-",
            "default": "-",
            "unit": "m/s",
            "uri": "-"
        },
        {
            "name": "weather_Radn",
            "description": "Daily shortwave radiation",
            "inputtype": "variable",
            "category": "exogenous",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "0",
            "max": "-",
            "default": "-",
            "unit": "MJ/m2/d",
            "uri": "-"
        },
        {
            "name": "waterBalance_Eos",
            "description": "Soil evaporation under standard conditions (MJ or mm eq.)",
            "inputtype": "variable",
            "category": "exogenous",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "0",
            "max": "-",
            "default": "-",
            "unit": "-",
            "uri": "-"
        },
        {
            "name": "waterBalance_Eo",
            "description": "Reference evapotranspiration (MJ or mm eq.)",
            "inputtype": "variable",
            "category": "exogenous",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "0",
            "max": "-",
            "default": "-",
            "unit": "-",
            "uri": "-"
        },
        {
            "name": "waterBalance_Es",
            "description": "Actual soil evaporation (MJ or mm eq.)",
            "inputtype": "variable",
            "category": "exogenous",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "0",
            "max": "-",
            "default": "-",
            "unit": "-",
            "uri": "-"
        },
        {
            "name": "waterBalance_Salb",
            "description": "Soil albedo",
            "inputtype": "variable",
            "category": "exogenous",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "0",
            "max": "1",
            "default": "-",
            "unit": "-",
            "uri": "-"
        },
        {
            "name": "InitialValues",
            "description": "State buffer for initial soil temperatures by layer",
            "inputtype": "variable",
            "category": "state",
            "datatype": "DOUBLELIST",
            "len": "-",
            "min": "-",
            "max": "-",
            "default": "MissingValue",
            "unit": "degC",
            "uri": "-"
        },
        {
            "name": "doInitialisationStuff",
            "description": "Flag to perform one-time initialisation in process",
            "inputtype": "variable",
            "category": "state",
            "datatype": "CHAR",
            "len": "-",
            "min": "-",
            "max": "-",
            "default": "True",
            "unit": "-",
            "uri": "-"
        },
        {
            "name": "internalTimeStep",
            "description": "Internal sub-daily timestep used in process loop",
            "inputtype": "variable",
            "category": "state",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "0",
            "max": "-",
            "default": "round(timestep/48)",
            "unit": "s",
            "uri": "-"
        },
        {
            "name": "timeOfDaySecs",
            "description": "Current time of day within the step",
            "inputtype": "variable",
            "category": "state",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "0",
            "max": "86400",
            "default": "-",
            "unit": "s",
            "uri": "-"
        },
        {
            "name": "numNodes",
            "description": "Number of soil nodes (including phantom and boundary nodes)",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "INT",
            "len": "-",
            "min": "1",
            "max": "-",
            "default": "-",
            "unit": "count",
            "uri": "-"
        },
        {
            "name": "numLayers",
            "description": "Number of soil layers (physical profile)",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "INT",
            "len": "-",
            "min": "1",
            "max": "-",
            "default": "-",
            "unit": "count",
            "uri": "-"
        },
        {
            "name": "nodeDepth",
            "description": "Node depths (m) with extended indexing",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "DOUBLELIST",
            "len": "-",
            "min": "0",
            "max": "-",
            "default": "-",
            "unit": "m",
            "uri": "-"
        },
        {
            "name": "volSpecHeatSoil",
            "description": "Volumetric specific heat at nodes",
            "inputtype": "variable",
            "category": "state",
            "datatype": "DOUBLELIST",
            "len": "-",
            "min": "0",
            "max": "-",
            "default": "0",
            "unit": "J m-3 K-1",
            "uri": "-"
        },
        {
            "name": "soilTemp",
            "description": "Soil temperature at nodes",
            "inputtype": "variable",
            "category": "state",
            "datatype": "DOUBLELIST",
            "len": "-",
            "min": "-",
            "max": "-",
            "default": "weather_Tav-based",
            "unit": "degC",
            "uri": "-"
        },
        {
            "name": "morningSoilTemp",
            "description": "Morning (5:00) soil temperature snapshot",
            "inputtype": "variable",
            "category": "state",
            "datatype": "DOUBLELIST",
            "len": "-",
            "min": "-",
            "max": "-",
            "default": "0",
            "unit": "degC",
            "uri": "-"
        },
        {
            "name": "heatStorage",
            "description": "Heat storage term per node for implicit scheme",
            "inputtype": "variable",
            "category": "state",
            "datatype": "DOUBLELIST",
            "len": "-",
            "min": "0",
            "max": "-",
            "default": "0",
            "unit": "-",
            "uri": "-"
        },
        {
            "name": "thermalConductance",
            "description": "Thermal conductance per node element",
            "inputtype": "variable",
            "category": "state",
            "datatype": "DOUBLELIST",
            "len": "-",
            "min": "0",
            "max": "-",
            "default": "0",
            "unit": "-",
            "uri": "-"
        },
        {
            "name": "thermalConductivity",
            "description": "Thermal conductivity per node",
            "inputtype": "variable",
            "category": "state",
            "datatype": "DOUBLELIST",
            "len": "-",
            "min": "0",
            "max": "-",
            "default": "0",
            "unit": "-",
            "uri": "-"
        },
        {
            "name": "boundaryLayerConductance",
            "description": "Boundary layer conductance (air-surface)",
            "inputtype": "variable",
            "category": "state",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "0",
            "max": "-",
            "default": "0",
            "unit": "-",
            "uri": "-"
        },
        {
            "name": "newTemperature",
            "description": "Working array for updated temperatures (includes air node)",
            "inputtype": "variable",
            "category": "state",
            "datatype": "DOUBLELIST",
            "len": "-",
            "min": "-",
            "max": "-",
            "default": "soilTemp",
            "unit": "degC",
            "uri": "-"
        },
        {
            "name": "airTemperature",
            "description": "Air temperature used in current step",
            "inputtype": "variable",
            "category": "state",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "-",
            "max": "-",
            "default": "weather_MeanT or interpolated",
            "unit": "degC",
            "uri": "-"
        },
        {
            "name": "maxTempYesterday",
            "description": "Yesterday's maximum temperature",
            "inputtype": "variable",
            "category": "state",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "-",
            "max": "-",
            "default": "weather_MaxT on init",
            "unit": "degC",
            "uri": "-"
        },
        {
            "name": "minTempYesterday",
            "description": "Yesterday's minimum temperature",
            "inputtype": "variable",
            "category": "state",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "-",
            "max": "-",
            "default": "weather_MinT on init",
            "unit": "degC",
            "uri": "-"
        },
        {
            "name": "soilWater",
            "description": "Soil water (node-based, mapped from layers)",
            "inputtype": "variable",
            "category": "state",
            "datatype": "DOUBLELIST",
            "len": "-",
            "min": "0",
            "max": "1",
            "default": "-",
            "unit": "vol/vol",
            "uri": "-"
        },
        {
            "name": "minSoilTemp",
            "description": "Min soil temperature (daily) at nodes",
            "inputtype": "variable",
            "category": "state",
            "datatype": "DOUBLELIST",
            "len": "-",
            "min": "-",
            "max": "-",
            "default": "0",
            "unit": "degC",
            "uri": "-"
        },
        {
            "name": "maxSoilTemp",
            "description": "Max soil temperature (daily) at nodes",
            "inputtype": "variable",
            "category": "state",
            "datatype": "DOUBLELIST",
            "len": "-",
            "min": "-",
            "max": "-",
            "default": "0",
            "unit": "degC",
            "uri": "-"
        },
        {
            "name": "aveSoilTemp",
            "description": "Average soil temperature (daily) at nodes",
            "inputtype": "variable",
            "category": "state",
            "datatype": "DOUBLELIST",
            "len": "-",
            "min": "-",
            "max": "-",
            "default": "0",
            "unit": "degC",
            "uri": "-"
        },
        {
            "name": "thickness",
            "description": "Augmented thickness array (with phantom layers) in source indexing scheme",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "DOUBLELIST",
            "len": "-",
            "min": "0",
            "max": "-",
            "default": "-",
            "unit": "-",
            "uri": "-"
        },
        {
            "name": "bulkDensity",
            "description": "Augmented bulk density array mapped to nodes",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "DOUBLELIST",
            "len": "-",
            "min": "0",
            "max": "-",
            "default": "-",
            "unit": "g/cm3 or similar",
            "uri": "-"
        },
        {
            "name": "rocks",
            "description": "Augmented rock fraction array mapped to nodes (%)",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "DOUBLELIST",
            "len": "-",
            "min": "0",
            "max": "100",
            "default": "-",
            "unit": "%",
            "uri": "-"
        },
        {
            "name": "carbon",
            "description": "Augmented organic carbon array mapped to nodes (%)",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "DOUBLELIST",
            "len": "-",
            "min": "0",
            "max": "100",
            "default": "-",
            "unit": "%",
            "uri": "-"
        },
        {
            "name": "sand",
            "description": "Augmented sand fraction array mapped to nodes (%)",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "DOUBLELIST",
            "len": "-",
            "min": "0",
            "max": "100",
            "default": "-",
            "unit": "%",
            "uri": "-"
        },
        {
            "name": "silt",
            "description": "Augmented silt fraction array mapped to nodes (%)",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "DOUBLELIST",
            "len": "-",
            "min": "0",
            "max": "100",
            "default": "-",
            "unit": "%",
            "uri": "-"
        },
        {
            "name": "clay",
            "description": "Augmented clay fraction array mapped to nodes (%)",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "DOUBLELIST",
            "len": "-",
            "min": "0",
            "max": "100",
            "default": "-",
            "unit": "%",
            "uri": "-"
        },
        {
            "name": "soilRoughnessHeight",
            "description": "Soil surface roughness height used for canopy/instrument adjustments",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "0",
            "max": "-",
            "default": "Derived from bareSoilRoughness",
            "unit": "-",
            "uri": "-"
        },
        {
            "name": "instrumentHeight",
            "description": "Instrument height used for wind/log-law calculations",
            "inputtype": "variable",
            "category": "state",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "0",
            "max": "-",
            "default": ">= canopyHeight+0.5",
            "unit": "-",
            "uri": "-"
        },
        {
            "name": "netRadiation",
            "description": "Net radiation at soil surface during current step",
            "inputtype": "variable",
            "category": "state",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "-",
            "max": "-",
            "default": "0",
            "unit": "-",
            "uri": "-"
        },
        {
            "name": "canopyHeight",
            "description": "Canopy height used in BL and radiation calculations",
            "inputtype": "variable",
            "category": "state",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "0",
            "max": "-",
            "default": "max(microClimate_CanopyHeight, soilRoughnessHeight)/1000",
            "unit": "-",
            "uri": "-"
        }
    ],
    "outputs": [
        {
            "name": "InitialValues",
            "description": "Updated stored initial soil temperatures (top layers)",
            "datatype": "DOUBLELIST",
            "category": "state",
            "len": "-",
            "min": "-",
            "max": "-",
            "default": "-",
            "unit": "degC",
            "uri": "-"
        },
        {
            "name": "doInitialisationStuff",
            "description": "Updated initialisation flag",
            "datatype": "CHAR",
            "category": "state",
            "len": "-",
            "min": "-",
            "max": "-",
            "default": "False after first call",
            "unit": "-",
            "uri": "-"
        },
        {
            "name": "internalTimeStep",
            "description": "Internal sub-step length used",
            "datatype": "DOUBLE",
            "category": "state",
            "len": "-",
            "min": "0",
            "max": "-",
            "default": "round(timestep/48)",
            "unit": "s",
            "uri": "-"
        },
        {
            "name": "timeOfDaySecs",
            "description": "End-of-loop time of day seconds",
            "datatype": "DOUBLE",
            "category": "state",
            "len": "-",
            "min": "0",
            "max": "86400",
            "default": "-",
            "unit": "s",
            "uri": "-"
        },
        {
            "name": "volSpecHeatSoil",
            "description": "Volumetric specific heat at nodes",
            "datatype": "DOUBLELIST",
            "category": "state",
            "len": "-",
            "min": "0",
            "max": "-",
            "default": "-",
            "unit": "J m-3 K-1",
            "uri": "-"
        },
        {
            "name": "soilTemp",
            "description": "Updated soil temperatures at nodes",
            "datatype": "DOUBLELIST",
            "category": "state",
            "len": "-",
            "min": "-",
            "max": "-",
            "default": "-",
            "unit": "degC",
            "uri": "-"
        },
        {
            "name": "morningSoilTemp",
            "description": "Updated morning soil temperatures (5:00)",
            "datatype": "DOUBLELIST",
            "category": "state",
            "len": "-",
            "min": "-",
            "max": "-",
            "default": "-",
            "unit": "degC",
            "uri": "-"
        },
        {
            "name": "heatStorage",
            "description": "Heat storage per node for implicit scheme",
            "datatype": "DOUBLELIST",
            "category": "state",
            "len": "-",
            "min": "0",
            "max": "-",
            "default": "-",
            "unit": "-",
            "uri": "-"
        },
        {
            "name": "thermalConductance",
            "description": "Thermal conductance per node element",
            "datatype": "DOUBLELIST",
            "category": "state",
            "len": "-",
            "min": "0",
            "max": "-",
            "default": "-",
            "unit": "-",
            "uri": "-"
        },
        {
            "name": "thermalConductivity",
            "description": "Thermal conductivity per node",
            "datatype": "DOUBLELIST",
            "category": "state",
            "len": "-",
            "min": "0",
            "max": "-",
            "default": "-",
            "unit": "-",
            "uri": "-"
        },
        {
            "name": "boundaryLayerConductance",
            "description": "Boundary layer conductance (air-surface) averaged/updated",
            "datatype": "DOUBLE",
            "category": "state",
            "len": "-",
            "min": "0",
            "max": "-",
            "default": "-",
            "unit": "-",
            "uri": "-"
        },
        {
            "name": "newTemperature",
            "description": "Updated working temperatures (includes air node)",
            "datatype": "DOUBLELIST",
            "category": "state",
            "len": "-",
            "min": "-",
            "max": "-",
            "default": "-",
            "unit": "degC",
            "uri": "-"
        },
        {
            "name": "airTemperature",
            "description": "Air temperature used in the final sub-step",
            "datatype": "DOUBLE",
            "category": "state",
            "len": "-",
            "min": "-",
            "max": "-",
            "default": "-",
            "unit": "degC",
            "uri": "-"
        },
        {
            "name": "maxTempYesterday",
            "description": "Updated yesterday's maximum air temperature",
            "datatype": "DOUBLE",
            "category": "state",
            "len": "-",
            "min": "-",
            "max": "-",
            "default": "weather_MaxT",
            "unit": "degC",
            "uri": "-"
        },
        {
            "name": "minTempYesterday",
            "description": "Updated yesterday's minimum air temperature",
            "datatype": "DOUBLE",
            "category": "state",
            "len": "-",
            "min": "-",
            "max": "-",
            "default": "weather_MinT",
            "unit": "degC",
            "uri": "-"
        },
        {
            "name": "soilWater",
            "description": "Updated node-based soil water (copied from waterBalance_SW)",
            "datatype": "DOUBLELIST",
            "category": "state",
            "len": "-",
            "min": "0",
            "max": "1",
            "default": "-",
            "unit": "vol/vol",
            "uri": "-"
        },
        {
            "name": "minSoilTemp",
            "description": "Daily minimum soil temperature at nodes",
            "datatype": "DOUBLELIST",
            "category": "state",
            "len": "-",
            "min": "-",
            "max": "-",
            "default": "initialised to soilTemp at day start",
            "unit": "degC",
            "uri": "-"
        },
        {
            "name": "maxSoilTemp",
            "description": "Daily maximum soil temperature at nodes",
            "datatype": "DOUBLELIST",
            "category": "state",
            "len": "-",
            "min": "-",
            "max": "-",
            "default": "initialised to soilTemp at day start",
            "unit": "degC",
            "uri": "-"
        },
        {
            "name": "aveSoilTemp",
            "description": "Daily average soil temperature at nodes (accumulated)",
            "datatype": "DOUBLELIST",
            "category": "state",
            "len": "-",
            "min": "-",
            "max": "-",
            "default": "0 then accumulated",
            "unit": "degC",
            "uri": "-"
        },
        {
            "name": "instrumentHeight",
            "description": "Updated instrument height",
            "datatype": "DOUBLE",
            "category": "state",
            "len": "-",
            "min": "0",
            "max": "-",
            "default": ">= canopyHeight+0.5",
            "unit": "-",
            "uri": "-"
        },
        {
            "name": "netRadiation",
            "description": "Updated net radiation at soil surface",
            "datatype": "DOUBLE",
            "category": "state",
            "len": "-",
            "min": "-",
            "max": "-",
            "default": "interpolated",
            "unit": "-",
            "uri": "-"
        },
        {
            "name": "canopyHeight",
            "description": "Updated canopy height used in BL calculations",
            "datatype": "DOUBLE",
            "category": "state",
            "len": "-",
            "min": "0",
            "max": "-",
            "default": "max(microClimate_CanopyHeight, soilRoughnessHeight)/1000",
            "unit": "-",
            "uri": "-"
        }
    ],
    "functions": [
        {
            "name": "getIniVariables",
            "description": "Initialise instrumentHeight from provided or default value."
        },
        {
            "name": "Calculate_getProfileVariables",
            "description": "Build and initialise layer/node arrays (thickness, nodeDepth, properties), including phantom nodes."
        },
        {
            "name": "Calculate_doThermalConductivityCoeffs",
            "description": "Compute thermal conductivity coefficient arrays from bulk density and clay."
        },
        {
            "name": "Calculate_readParam",
            "description": "Compute soil temperature profile and thermal conductivity parameters; set soil roughness height."
        },
        {
            "name": "Calculate_getOtherVariables",
            "description": "Update soilWater from water balance; compute canopy and instrument heights."
        },
        {
            "name": "volumetricFractionOrganicMatter",
            "description": "Volumetric fraction of organic matter."
        },
        {
            "name": "volumetricFractionRocks",
            "description": "Volumetric fraction of rocks."
        },
        {
            "name": "volumetricFractionIce",
            "description": "Volumetric fraction of ice (always 0 here)."
        },
        {
            "name": "volumetricFractionWater",
            "description": "Volumetric fraction of water."
        },
        {
            "name": "volumetricFractionClay",
            "description": "Volumetric fraction of clay."
        },
        {
            "name": "volumetricFractionSilt",
            "description": "Volumetric fraction of silt."
        },
        {
            "name": "volumetricFractionSand",
            "description": "Volumetric fraction of sand."
        },
        {
            "name": "kelvinT",
            "description": "Convert Celsius to Kelvin."
        },
        {
            "name": "Divide",
            "description": "Safe division with error fallback."
        },
        {
            "name": "Sum",
            "description": "Sum with start/end indices and missing value check."
        },
        {
            "name": "volumetricSpecificHeat",
            "description": "Return specific heat capacity per constituent (lookup)."
        },
        {
            "name": "volumetricFractionAir",
            "description": "Volumetric fraction of air."
        },
        {
            "name": "airDensity",
            "description": "Compute air density from temperature and pressure."
        },
        {
            "name": "longWaveRadn",
            "description": "Longwave radiation using Stefan-Boltzmann law."
        },
        {
            "name": "mapLayer2Node",
            "description": "Map layer values to nodes by depth-weighted interpolation."
        },
        {
            "name": "ThermalConductance",
            "description": "Return constituent 'conductance' (implementation returns specific heat per original bug)."
        },
        {
            "name": "shapeFactor",
            "description": "Return constituent shape factor (implementation returns specific heat per original bug)."
        },
        {
            "name": "Calculate_doUpdate",
            "description": "Update soil temp stats (min/max/avg) and accumulate boundary layer conductance."
        },
        {
            "name": "Calculate_doThomas",
            "description": "Tri-diagonal Thomas algorithm solve for heat diffusion."
        },
        {
            "name": "Calculate_getBoundaryLayerConductance",
            "description": "Compute boundary layer conductance with Monin-Obukhov stability corrections and radiative term."
        },
        {
            "name": "math_log_safe",
            "description": "Safe natural logarithm."
        },
        {
            "name": "interpolateNetRadiation",
            "description": "Interpolate net radiation to sub-daily step including LW and SW with cloud and emissivity effects."
        },
        {
            "name": "interpolateTemperature",
            "description": "Interpolate sub-daily air temperature using sinusoidal diurnal cycle."
        },
        {
            "name": "math_sin",
            "description": "Sine wrapper."
        },
        {
            "name": "doThermalConductivity",
            "description": "Compute thermal conductivity layers via constituent mixing and map to nodes."
        },
        {
            "name": "doVolumetricSpecificHeat",
            "description": "Compute volumetric specific heat of soil via constituents and map to nodes."
        },
        {
            "name": "Zero",
            "description": "Return a zeroed copy of an array (or empty if None)."
        },
        {
            "name": "Calculate_doNetRadiation",
            "description": "Distribute daily solar radiation over sub-steps and estimate cloud fraction and vapour emissivity term."
        },
        {
            "name": "Calculate_doProcess",
            "description": "Core sub-daily loop: compute radiation, BL conductance, solve heat diffusion, and update stats."
        },
        {
            "name": "ToCumThickness",
            "description": "Convert thickness array to cumulative depths."
        },
        {
            "name": "calcSoilTemperature",
            "description": "Analytical soil temperature profile using damping depth and annual harmonics."
        },
        {
            "name": "math_exp_safe",
            "description": "Safe exponential with overflow handling."
        },
        {
            "name": "calcSurfaceTemperature",
            "description": "Estimate surface temperature from mean/max T, albedo, and radiation."
        },
        {
            "name": "ValuesInArray",
            "description": "Check if an array contains any non-missing values (including NaN handling)."
        },
        {
            "name": "init",
            "description": "Initialise arrays and parameters for the soil heat model."
        },
        {
            "name": "process",
            "description": "Advance the model by one external time step and update all state variables."
        }
    ],
    "tests": [
        {
            "name": "-",
            "description": "-",
            "inputs": [],
            "outputs": []
        }
    ],
    "comments": [
        {
            "comment": "Arrays use 1-based style indexing with extra padding (size ~ numNodes+2); many loops start at 1."
        },
        {
            "comment": "soilRoughnessHeight is computed in Calculate_readParam but not returned by init; process expects it as an input parameter."
        },
        {
            "comment": "ThermalConductance and shapeFactor functions overwrite computed values by returning volumetricSpecificHeat; preserved to match source but likely a bug."
        },
        {
            "comment": "Parameter ps (particle density of minerals) is passed as 0.0 in process->Calculate_doProcess; not supplied via inputs."
        },
        {
            "comment": "internalTimeStep is computed as round(timestep/48); interactionsPerDay is hard-coded to 48."
        },
        {
            "comment": "Units for some inputs (e.g., instrumentHeight, canopyHeight) are inconsistent in comments; left unspecified."
        },
        {
            "comment": "Calculate_readParam type annotation mismatches returned tuple (returns 7 items)."
        },
        {
            "comment": "soilConstituentNames is a list of strings; represented as CHAR due to schema constraints."
        }
    ]
}