{
    "init": {
        "name": "init_soiltemperature"
    },
    "process": {
        "name": "model_soiltemperature",
        "description": "Computes multi-node soil temperature and surface energy fluxes for a time step, including boundary layer conductance, net radiation interpolation, and heat diffusion."
    },
    "inputs": [
        {
            "name": "weather_MinT",
            "description": "Daily minimum air temperature",
            "inputtype": "variable",
            "category": "exogenous",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "",
            "max": "",
            "default": "",
            "unit": "degC",
            "uri": ""
        },
        {
            "name": "weather_MaxT",
            "description": "Daily maximum air temperature",
            "inputtype": "variable",
            "category": "exogenous",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "",
            "max": "",
            "default": "",
            "unit": "degC",
            "uri": ""
        },
        {
            "name": "weather_MeanT",
            "description": "Daily mean air temperature",
            "inputtype": "variable",
            "category": "exogenous",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "",
            "max": "",
            "default": "",
            "unit": "degC",
            "uri": ""
        },
        {
            "name": "weather_Tav",
            "description": "Mean annual air temperature",
            "inputtype": "variable",
            "category": "exogenous",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "",
            "max": "",
            "default": "",
            "unit": "degC",
            "uri": ""
        },
        {
            "name": "weather_Amp",
            "description": "Amplitude of annual temperature cycle",
            "inputtype": "variable",
            "category": "exogenous",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "",
            "max": "",
            "default": "",
            "unit": "degC",
            "uri": ""
        },
        {
            "name": "weather_AirPressure",
            "description": "Air pressure",
            "inputtype": "variable",
            "category": "exogenous",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "",
            "max": "",
            "default": "",
            "unit": "hPa",
            "uri": ""
        },
        {
            "name": "weather_Wind",
            "description": "Wind speed at instrument height",
            "inputtype": "variable",
            "category": "exogenous",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "",
            "max": "",
            "default": "",
            "unit": "m s-1",
            "uri": ""
        },
        {
            "name": "weather_Latitude",
            "description": "Site latitude",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "-90",
            "max": "90",
            "default": "",
            "unit": "deg",
            "uri": ""
        },
        {
            "name": "weather_Radn",
            "description": "Daily global solar radiation",
            "inputtype": "variable",
            "category": "exogenous",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "",
            "max": "",
            "default": "",
            "unit": "MJ m-2 d-1",
            "uri": ""
        },
        {
            "name": "clock_Today_DayOfYear",
            "description": "Day of year",
            "inputtype": "variable",
            "category": "exogenous",
            "datatype": "INT",
            "len": "-",
            "min": "1",
            "max": "366",
            "default": "",
            "unit": "-",
            "uri": ""
        },
        {
            "name": "microClimate_CanopyHeight",
            "description": "Canopy height",
            "inputtype": "variable",
            "category": "exogenous",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "0",
            "max": "",
            "default": "",
            "unit": "mm",
            "uri": ""
        },
        {
            "name": "physical_Thickness",
            "description": "Layer thicknesses",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "DOUBLEARRAY",
            "len": "-",
            "min": "0",
            "max": "",
            "default": "",
            "unit": "mm",
            "uri": ""
        },
        {
            "name": "physical_BD",
            "description": "Bulk density by layer",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "DOUBLEARRAY",
            "len": "-",
            "min": "0",
            "max": "",
            "default": "",
            "unit": "g cm-3",
            "uri": ""
        },
        {
            "name": "ps",
            "description": "Particle density of soil minerals",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "0",
            "max": "",
            "default": "2.65",
            "unit": "g cm-3",
            "uri": ""
        },
        {
            "name": "physical_Rocks",
            "description": "Rock fragment content by layer (percent volume)",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "DOUBLEARRAY",
            "len": "-",
            "min": "0",
            "max": "100",
            "default": "",
            "unit": "%",
            "uri": ""
        },
        {
            "name": "physical_ParticleSizeSand",
            "description": "Sand fraction by layer (percent)",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "DOUBLEARRAY",
            "len": "-",
            "min": "0",
            "max": "100",
            "default": "",
            "unit": "%",
            "uri": ""
        },
        {
            "name": "physical_ParticleSizeSilt",
            "description": "Silt fraction by layer (percent)",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "DOUBLEARRAY",
            "len": "-",
            "min": "0",
            "max": "100",
            "default": "",
            "unit": "%",
            "uri": ""
        },
        {
            "name": "physical_ParticleSizeClay",
            "description": "Clay fraction by layer (percent)",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "DOUBLEARRAY",
            "len": "-",
            "min": "0",
            "max": "100",
            "default": "",
            "unit": "%",
            "uri": ""
        },
        {
            "name": "organic_Carbon",
            "description": "Organic carbon content by layer (percent)",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "DOUBLEARRAY",
            "len": "-",
            "min": "0",
            "max": "100",
            "default": "",
            "unit": "%",
            "uri": ""
        },
        {
            "name": "waterBalance_SW",
            "description": "Volumetric soil water by layer",
            "inputtype": "variable",
            "category": "exogenous",
            "datatype": "DOUBLEARRAY",
            "len": "-",
            "min": "0",
            "max": "1",
            "default": "",
            "unit": "m3 m-3",
            "uri": ""
        },
        {
            "name": "waterBalance_Eos",
            "description": "Soil evaporation supply term (rate)",
            "inputtype": "variable",
            "category": "exogenous",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "0",
            "max": "",
            "default": "",
            "unit": "-",
            "uri": ""
        },
        {
            "name": "waterBalance_Eo",
            "description": "Potential evaporation",
            "inputtype": "variable",
            "category": "exogenous",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "0",
            "max": "",
            "default": "",
            "unit": "-",
            "uri": ""
        },
        {
            "name": "waterBalance_Es",
            "description": "Actual soil evaporation (rate)",
            "inputtype": "variable",
            "category": "exogenous",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "0",
            "max": "",
            "default": "",
            "unit": "-",
            "uri": ""
        },
        {
            "name": "waterBalance_Salb",
            "description": "Soil surface albedo",
            "inputtype": "variable",
            "category": "exogenous",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "0",
            "max": "1",
            "default": "",
            "unit": "-",
            "uri": ""
        },
        {
            "name": "InitialValues",
            "description": "Initial soil temperature values for topsoil nodes (if provided), persisted",
            "inputtype": "variable",
            "category": "state",
            "datatype": "DOUBLEARRAY",
            "len": "-",
            "min": "",
            "max": "",
            "default": "[]",
            "unit": "degC",
            "uri": ""
        },
        {
            "name": "pInitialValues",
            "description": "Configured initial temperature values by layer",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "DOUBLEARRAY",
            "len": "-",
            "min": "",
            "max": "",
            "default": "[]",
            "unit": "degC",
            "uri": ""
        },
        {
            "name": "DepthToConstantTemperature",
            "description": "Depth to constant temperature lower boundary",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "0",
            "max": "",
            "default": "4000",
            "unit": "mm",
            "uri": ""
        },
        {
            "name": "timestep",
            "description": "External model time step in seconds",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "1",
            "max": "",
            "default": "86400",
            "unit": "s",
            "uri": ""
        },
        {
            "name": "latentHeatOfVapourisation",
            "description": "Latent heat of vaporisation",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "",
            "max": "",
            "default": "2450000",
            "unit": "J kg-1",
            "uri": ""
        },
        {
            "name": "stefanBoltzmannConstant",
            "description": "Stefan-Boltzmann constant",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "",
            "max": "",
            "default": "5.67e-8",
            "unit": "W m-2 K-4",
            "uri": ""
        },
        {
            "name": "airNode",
            "description": "Air node index in node arrays",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "INT",
            "len": "-",
            "min": "0",
            "max": "",
            "default": "0",
            "unit": "-",
            "uri": ""
        },
        {
            "name": "surfaceNode",
            "description": "Surface node index in node arrays",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "INT",
            "len": "-",
            "min": "0",
            "max": "",
            "default": "1",
            "unit": "-",
            "uri": ""
        },
        {
            "name": "topsoilNode",
            "description": "Topsoil node index",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "INT",
            "len": "-",
            "min": "1",
            "max": "",
            "default": "2",
            "unit": "-",
            "uri": ""
        },
        {
            "name": "numPhantomNodes",
            "description": "Number of phantom nodes below soil profile",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "INT",
            "len": "-",
            "min": "1",
            "max": "",
            "default": "2",
            "unit": "-",
            "uri": ""
        },
        {
            "name": "constantBoundaryLayerConductance",
            "description": "Constant boundary layer conductance (if used)",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "0",
            "max": "",
            "default": "",
            "unit": "-",
            "uri": ""
        },
        {
            "name": "numIterationsForBoundaryLayerConductance",
            "description": "Iterations when solving for boundary layer conductance",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "INT",
            "len": "-",
            "min": "0",
            "max": "",
            "default": "3",
            "unit": "-",
            "uri": ""
        },
        {
            "name": "defaultTimeOfMaximumTemperature",
            "description": "Default time of day for maximum air temperature",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "0",
            "max": "24",
            "default": "15",
            "unit": "h",
            "uri": ""
        },
        {
            "name": "defaultInstrumentHeight",
            "description": "Default instrument height if not specified",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "0.1",
            "max": "",
            "default": "2.0",
            "unit": "m",
            "uri": ""
        },
        {
            "name": "bareSoilRoughness",
            "description": "Bare soil roughness height used to initialize soil roughness height",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "0",
            "max": "",
            "default": "10",
            "unit": "mm",
            "uri": ""
        },
        {
            "name": "doInitialisationStuff",
            "description": "Flag to run one-time initialisation of temperatures and states",
            "inputtype": "variable",
            "category": "state",
            "datatype": "INT",
            "len": "-",
            "min": "0",
            "max": "1",
            "default": "1",
            "unit": "-",
            "uri": ""
        },
        {
            "name": "internalTimeStep",
            "description": "Internal integration time step used by the soil model",
            "inputtype": "variable",
            "category": "state",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "1",
            "max": "",
            "default": "",
            "unit": "s",
            "uri": ""
        },
        {
            "name": "timeOfDaySecs",
            "description": "Within-day simulation time",
            "inputtype": "variable",
            "category": "state",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "0",
            "max": "86400",
            "default": "",
            "unit": "s",
            "uri": ""
        },
        {
            "name": "numNodes",
            "description": "Number of thermal nodes (including boundary/phantom as implemented)",
            "inputtype": "variable",
            "category": "state",
            "datatype": "INT",
            "len": "-",
            "min": "3",
            "max": "",
            "default": "",
            "unit": "-",
            "uri": ""
        },
        {
            "name": "numLayers",
            "description": "Number of soil layers in profile",
            "inputtype": "variable",
            "category": "state",
            "datatype": "INT",
            "len": "-",
            "min": "1",
            "max": "",
            "default": "",
            "unit": "-",
            "uri": ""
        },
        {
            "name": "nodeDepth",
            "description": "Depth of each node",
            "inputtype": "variable",
            "category": "state",
            "datatype": "DOUBLEARRAY",
            "len": "-",
            "min": "0",
            "max": "",
            "default": "",
            "unit": "m",
            "uri": ""
        },
        {
            "name": "thermCondPar1",
            "description": "Thermal conductivity empirical coefficient 1 by element/node",
            "inputtype": "variable",
            "category": "state",
            "datatype": "DOUBLEARRAY",
            "len": "-",
            "min": "",
            "max": "",
            "default": "",
            "unit": "-",
            "uri": ""
        },
        {
            "name": "thermCondPar2",
            "description": "Thermal conductivity empirical coefficient 2 by element/node",
            "inputtype": "variable",
            "category": "state",
            "datatype": "DOUBLEARRAY",
            "len": "-",
            "min": "",
            "max": "",
            "default": "",
            "unit": "-",
            "uri": ""
        },
        {
            "name": "thermCondPar3",
            "description": "Thermal conductivity empirical coefficient 3 by element/node",
            "inputtype": "variable",
            "category": "state",
            "datatype": "DOUBLEARRAY",
            "len": "-",
            "min": "",
            "max": "",
            "default": "",
            "unit": "-",
            "uri": ""
        },
        {
            "name": "thermCondPar4",
            "description": "Thermal conductivity empirical coefficient 4 by element/node",
            "inputtype": "variable",
            "category": "state",
            "datatype": "DOUBLEARRAY",
            "len": "-",
            "min": "",
            "max": "",
            "default": "",
            "unit": "-",
            "uri": ""
        },
        {
            "name": "volSpecHeatSoil",
            "description": "Volumetric specific heat at nodes",
            "inputtype": "variable",
            "category": "state",
            "datatype": "DOUBLEARRAY",
            "len": "-",
            "min": "0",
            "max": "",
            "default": "",
            "unit": "J m-3 K-1",
            "uri": ""
        },
        {
            "name": "soilTemp",
            "description": "Soil temperature at nodes (air, surface, profile)",
            "inputtype": "variable",
            "category": "state",
            "datatype": "DOUBLEARRAY",
            "len": "-",
            "min": "",
            "max": "",
            "default": "",
            "unit": "degC",
            "uri": ""
        },
        {
            "name": "morningSoilTemp",
            "description": "Soil temperature snapshot at ~5 AM for nodes",
            "inputtype": "variable",
            "category": "state",
            "datatype": "DOUBLEARRAY",
            "len": "-",
            "min": "",
            "max": "",
            "default": "",
            "unit": "degC",
            "uri": ""
        },
        {
            "name": "heatStorage",
            "description": "Heat storage term per node for implicit solver",
            "inputtype": "variable",
            "category": "state",
            "datatype": "DOUBLEARRAY",
            "len": "-",
            "min": "0",
            "max": "",
            "default": "",
            "unit": "W m-2 K-1 (scaled)",
            "uri": ""
        },
        {
            "name": "thermalConductance",
            "description": "Element thermal conductance used by solver (node-based)",
            "inputtype": "variable",
            "category": "state",
            "datatype": "DOUBLEARRAY",
            "len": "-",
            "min": "0",
            "max": "",
            "default": "",
            "unit": "-",
            "uri": ""
        },
        {
            "name": "thermalConductivity",
            "description": "Thermal conductivity at nodes (includes BL conductance at air node)",
            "inputtype": "variable",
            "category": "state",
            "datatype": "DOUBLEARRAY",
            "len": "-",
            "min": "0",
            "max": "",
            "default": "",
            "unit": "W m-1 K-1",
            "uri": ""
        },
        {
            "name": "boundaryLayerConductance",
            "description": "Boundary layer conductance aggregated over the day",
            "inputtype": "variable",
            "category": "state",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "0",
            "max": "",
            "default": "",
            "unit": "-",
            "uri": ""
        },
        {
            "name": "newTemperature",
            "description": "Working new temperature vector for implicit solver (nodes)",
            "inputtype": "variable",
            "category": "state",
            "datatype": "DOUBLEARRAY",
            "len": "-",
            "min": "",
            "max": "",
            "default": "",
            "unit": "degC",
            "uri": ""
        },
        {
            "name": "airTemperature",
            "description": "Current air temperature (interpolated intra-day if needed)",
            "inputtype": "variable",
            "category": "state",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "",
            "max": "",
            "default": "",
            "unit": "degC",
            "uri": ""
        },
        {
            "name": "maxTempYesterday",
            "description": "Yesterday's max air temperature used in interpolation",
            "inputtype": "variable",
            "category": "state",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "",
            "max": "",
            "default": "",
            "unit": "degC",
            "uri": ""
        },
        {
            "name": "minTempYesterday",
            "description": "Yesterday's min air temperature used in interpolation",
            "inputtype": "variable",
            "category": "state",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "",
            "max": "",
            "default": "",
            "unit": "degC",
            "uri": ""
        },
        {
            "name": "soilWater",
            "description": "Node-mapped volumetric soil water (includes phantom nodes fill)",
            "inputtype": "variable",
            "category": "state",
            "datatype": "DOUBLEARRAY",
            "len": "-",
            "min": "0",
            "max": "1",
            "default": "",
            "unit": "m3 m-3",
            "uri": ""
        },
        {
            "name": "minSoilTemp",
            "description": "Minimum soil temperature per node for the current day",
            "inputtype": "variable",
            "category": "state",
            "datatype": "DOUBLEARRAY",
            "len": "-",
            "min": "",
            "max": "",
            "default": "",
            "unit": "degC",
            "uri": ""
        },
        {
            "name": "maxSoilTemp",
            "description": "Maximum soil temperature per node for the current day",
            "inputtype": "variable",
            "category": "state",
            "datatype": "DOUBLEARRAY",
            "len": "-",
            "min": "",
            "max": "",
            "default": "",
            "unit": "degC",
            "uri": ""
        },
        {
            "name": "aveSoilTemp",
            "description": "Average soil temperature per node over the day (accumulated within step)",
            "inputtype": "variable",
            "category": "state",
            "datatype": "DOUBLEARRAY",
            "len": "-",
            "min": "",
            "max": "",
            "default": "",
            "unit": "degC",
            "uri": ""
        },
        {
            "name": "aveSoilWater",
            "description": "Placeholder average soil water by layer (unused here)",
            "inputtype": "variable",
            "category": "state",
            "datatype": "DOUBLEARRAY",
            "len": "-",
            "min": "",
            "max": "",
            "default": "[]",
            "unit": "m3 m-3",
            "uri": ""
        },
        {
            "name": "thickness",
            "description": "Node thickness array including phantom nodes (indexing with nodes)",
            "inputtype": "variable",
            "category": "state",
            "datatype": "DOUBLEARRAY",
            "len": "-",
            "min": "0",
            "max": "",
            "default": "",
            "unit": "mm",
            "uri": ""
        },
        {
            "name": "bulkDensity",
            "description": "Bulk density mapped to nodes/elements (includes phantom fill)",
            "inputtype": "variable",
            "category": "state",
            "datatype": "DOUBLEARRAY",
            "len": "-",
            "min": "0",
            "max": "",
            "default": "",
            "unit": "g cm-3",
            "uri": ""
        },
        {
            "name": "rocks",
            "description": "Rock fraction by node/layer (percent volume)",
            "inputtype": "variable",
            "category": "state",
            "datatype": "DOUBLEARRAY",
            "len": "-",
            "min": "0",
            "max": "100",
            "default": "",
            "unit": "%",
            "uri": ""
        },
        {
            "name": "carbon",
            "description": "Organic carbon by node/layer (percent)",
            "inputtype": "variable",
            "category": "state",
            "datatype": "DOUBLEARRAY",
            "len": "-",
            "min": "0",
            "max": "100",
            "default": "",
            "unit": "%",
            "uri": ""
        },
        {
            "name": "sand",
            "description": "Sand fraction by node/layer (percent)",
            "inputtype": "variable",
            "category": "state",
            "datatype": "DOUBLEARRAY",
            "len": "-",
            "min": "0",
            "max": "100",
            "default": "",
            "unit": "%",
            "uri": ""
        },
        {
            "name": "pom",
            "description": "Particle density of organic matter",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "0",
            "max": "",
            "default": "1.3",
            "unit": "g cm-3",
            "uri": ""
        },
        {
            "name": "silt",
            "description": "Silt fraction by node/layer (percent)",
            "inputtype": "variable",
            "category": "state",
            "datatype": "DOUBLEARRAY",
            "len": "-",
            "min": "0",
            "max": "100",
            "default": "",
            "unit": "%",
            "uri": ""
        },
        {
            "name": "clay",
            "description": "Clay fraction by node/layer (percent)",
            "inputtype": "variable",
            "category": "state",
            "datatype": "DOUBLEARRAY",
            "len": "-",
            "min": "0",
            "max": "100",
            "default": "",
            "unit": "%",
            "uri": ""
        },
        {
            "name": "soilRoughnessHeight",
            "description": "Soil surface roughness height",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "0",
            "max": "",
            "default": "",
            "unit": "mm",
            "uri": ""
        },
        {
            "name": "instrumentHeight",
            "description": "Instrument height above ground (updated to be >= canopy+0.5 m)",
            "inputtype": "variable",
            "category": "state",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "0.5",
            "max": "",
            "default": "",
            "unit": "m",
            "uri": ""
        },
        {
            "name": "netRadiation",
            "description": "Net radiation at soil surface during sub-steps (aggregated as last value)",
            "inputtype": "variable",
            "category": "state",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "",
            "max": "",
            "default": "",
            "unit": "MJ m-2 per internal step",
            "uri": ""
        },
        {
            "name": "canopyHeight",
            "description": "Effective canopy height used for BL calculations (>= roughness)",
            "inputtype": "variable",
            "category": "state",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "0",
            "max": "",
            "default": "",
            "unit": "m",
            "uri": ""
        },
        {
            "name": "instrumHeight",
            "description": "Optional direct instrument height input used during init selection",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "0",
            "max": "",
            "default": "",
            "unit": "m",
            "uri": ""
        },
        {
            "name": "nu",
            "description": "Implicit scheme weighting factor (Crank-Nicolson parameter)",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "0",
            "max": "1",
            "default": "0.5",
            "unit": "-",
            "uri": ""
        },
        {
            "name": "boundarLayerConductanceSource",
            "description": "Boundary layer conductance source selector: 'constant' or 'calc'",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "CHAR",
            "len": "-",
            "min": "",
            "max": "",
            "default": "calc",
            "unit": "-",
            "uri": ""
        },
        {
            "name": "netRadiationSource",
            "description": "Net radiation source selector: 'calc' or 'eos'",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "CHAR",
            "len": "-",
            "min": "",
            "max": "",
            "default": "calc",
            "unit": "-",
            "uri": ""
        },
        {
            "name": "MissingValue",
            "description": "Sentinel value used to mark missing data in arrays",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "",
            "max": "",
            "default": "-999",
            "unit": "-",
            "uri": ""
        },
        {
            "name": "soilConstituentNames",
            "description": "Names of soil constituents considered in thermal property mixing (e.g., ['Rocks','OrganicMatter','Sand','Silt','Clay','Water','Air','Minerals'])",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "CHAR",
            "len": "-",
            "min": "",
            "max": "",
            "default": "['Rocks','OrganicMatter','Sand','Silt','Clay','Water','Air','Minerals']",
            "unit": "-",
            "uri": ""
        }
    ],
    "outputs": [
        {
            "name": "heatStorage",
            "description": "Heat storage term per node from implicit solver",
            "datatype": "DOUBLEARRAY",
            "category": "state",
            "len": "-",
            "min": "0",
            "max": "",
            "default": "",
            "unit": "W m-2 K-1 (scaled)",
            "uri": ""
        },
        {
            "name": "instrumentHeight",
            "description": "Updated instrument height above ground",
            "datatype": "DOUBLE",
            "category": "state",
            "len": "-",
            "min": "0.5",
            "max": "",
            "default": "",
            "unit": "m",
            "uri": ""
        },
        {
            "name": "canopyHeight",
            "description": "Updated effective canopy height",
            "datatype": "DOUBLE",
            "category": "state",
            "len": "-",
            "min": "0",
            "max": "",
            "default": "",
            "unit": "m",
            "uri": ""
        },
        {
            "name": "minSoilTemp",
            "description": "Minimum soil temperature per node during the day",
            "datatype": "DOUBLEARRAY",
            "category": "state",
            "len": "-",
            "min": "",
            "max": "",
            "default": "",
            "unit": "degC",
            "uri": ""
        },
        {
            "name": "maxSoilTemp",
            "description": "Maximum soil temperature per node during the day",
            "datatype": "DOUBLEARRAY",
            "category": "state",
            "len": "-",
            "min": "",
            "max": "",
            "default": "",
            "unit": "degC",
            "uri": ""
        },
        {
            "name": "aveSoilTemp",
            "description": "Average soil temperature per node over the day",
            "datatype": "DOUBLEARRAY",
            "category": "state",
            "len": "-",
            "min": "",
            "max": "",
            "default": "",
            "unit": "degC",
            "uri": ""
        },
        {
            "name": "volSpecHeatSoil",
            "description": "Volumetric specific heat at nodes after mixing/mapping",
            "datatype": "DOUBLEARRAY",
            "category": "state",
            "len": "-",
            "min": "0",
            "max": "",
            "default": "",
            "unit": "J m-3 K-1",
            "uri": ""
        },
        {
            "name": "soilTemp",
            "description": "Updated soil temperature at nodes",
            "datatype": "DOUBLEARRAY",
            "category": "state",
            "len": "-",
            "min": "",
            "max": "",
            "default": "",
            "unit": "degC",
            "uri": ""
        },
        {
            "name": "netRadiation",
            "description": "Net radiation at soil surface for the last internal step",
            "datatype": "DOUBLE",
            "category": "state",
            "len": "-",
            "min": "",
            "max": "",
            "default": "",
            "unit": "MJ m-2 per internal step",
            "uri": ""
        },
        {
            "name": "morningSoilTemp",
            "description": "Soil temperatures snapshot at ~5 AM (nodes)",
            "datatype": "DOUBLEARRAY",
            "category": "state",
            "len": "-",
            "min": "",
            "max": "",
            "default": "",
            "unit": "degC",
            "uri": ""
        },
        {
            "name": "newTemperature",
            "description": "Working new temperature vector after solver step",
            "datatype": "DOUBLEARRAY",
            "category": "state",
            "len": "-",
            "min": "",
            "max": "",
            "default": "",
            "unit": "degC",
            "uri": ""
        },
        {
            "name": "thermalConductivity",
            "description": "Thermal conductivity at nodes (includes BL at air node)",
            "datatype": "DOUBLEARRAY",
            "category": "state",
            "len": "-",
            "min": "0",
            "max": "",
            "default": "",
            "unit": "W m-1 K-1",
            "uri": ""
        },
        {
            "name": "thermalConductance",
            "description": "Element thermal conductance after solver step",
            "datatype": "DOUBLEARRAY",
            "category": "state",
            "len": "-",
            "min": "0",
            "max": "",
            "default": "",
            "unit": "-",
            "uri": ""
        },
        {
            "name": "boundaryLayerConductance",
            "description": "Aggregated boundary layer conductance for the day",
            "datatype": "DOUBLE",
            "category": "state",
            "len": "-",
            "min": "0",
            "max": "",
            "default": "",
            "unit": "-",
            "uri": ""
        },
        {
            "name": "maxTempYesterday",
            "description": "Updated previous day's maximum air temperature",
            "datatype": "DOUBLE",
            "category": "state",
            "len": "-",
            "min": "",
            "max": "",
            "default": "",
            "unit": "degC",
            "uri": ""
        },
        {
            "name": "minTempYesterday",
            "description": "Updated previous day's minimum air temperature",
            "datatype": "DOUBLE",
            "category": "state",
            "len": "-",
            "min": "",
            "max": "",
            "default": "",
            "unit": "degC",
            "uri": ""
        },
        {
            "name": "airTemperature",
            "description": "Air temperature used for the last internal step",
            "datatype": "DOUBLE",
            "category": "state",
            "len": "-",
            "min": "",
            "max": "",
            "default": "",
            "unit": "degC",
            "uri": ""
        },
        {
            "name": "internalTimeStep",
            "description": "Internal integration time step used within-day",
            "datatype": "DOUBLE",
            "category": "state",
            "len": "-",
            "min": "1",
            "max": "",
            "default": "",
            "unit": "s",
            "uri": ""
        },
        {
            "name": "timeOfDaySecs",
            "description": "Within-day time at end of process step",
            "datatype": "DOUBLE",
            "category": "state",
            "len": "-",
            "min": "0",
            "max": "86400",
            "default": "",
            "unit": "s",
            "uri": ""
        },
        {
            "name": "InitialValues",
            "description": "Persisted initial temperature values for topsoil nodes",
            "datatype": "DOUBLEARRAY",
            "category": "state",
            "len": "-",
            "min": "",
            "max": "",
            "default": "[]",
            "unit": "degC",
            "uri": ""
        },
        {
            "name": "soilWater",
            "description": "Updated node volumetric soil water",
            "datatype": "DOUBLEARRAY",
            "category": "state",
            "len": "-",
            "min": "0",
            "max": "1",
            "default": "",
            "unit": "m3 m-3",
            "uri": ""
        },
        {
            "name": "rocks",
            "description": "Rock fraction by node/layer (carried forward)",
            "datatype": "DOUBLEARRAY",
            "category": "state",
            "len": "-",
            "min": "0",
            "max": "100",
            "default": "",
            "unit": "%",
            "uri": ""
        },
        {
            "name": "carbon",
            "description": "Organic carbon by node/layer (carried forward)",
            "datatype": "DOUBLEARRAY",
            "category": "state",
            "len": "-",
            "min": "0",
            "max": "100",
            "default": "",
            "unit": "%",
            "uri": ""
        },
        {
            "name": "doInitialisationStuff",
            "description": "Initialisation flag state after running initialisation once",
            "datatype": "INT",
            "category": "state",
            "len": "-",
            "min": "0",
            "max": "1",
            "default": "",
            "unit": "-",
            "uri": ""
        }
    ],
    "functions": [
        {
            "name": "getIniVariables",
            "description": "Selects instrument height using provided value or a default."
        },
        {
            "name": "getProfileVariables",
            "description": "Allocates and constructs node/layer arrays and derived profiles including node depths and phantom nodes."
        },
        {
            "name": "doThermalConductivityCoeffs",
            "description": "Computes empirical coefficients for soil thermal conductivity from texture and bulk density."
        },
        {
            "name": "readParam",
            "description": "Initializes thermal conductivity coefficients and initial soil temperatures."
        },
        {
            "name": "getOtherVariables",
            "description": "Maps water content to nodes and updates canopy and instrument heights."
        },
        {
            "name": "volumetricFractionOrganicMatter",
            "description": "Computes volumetric fraction of organic matter."
        },
        {
            "name": "volumetricFractionRocks",
            "description": "Computes volumetric fraction of rocks."
        },
        {
            "name": "volumetricFractionIce",
            "description": "Returns volumetric fraction of ice (fixed 0)."
        },
        {
            "name": "volumetricFractionWater",
            "description": "Computes volumetric fraction of water adjusted for organic matter."
        },
        {
            "name": "volumetricFractionClay",
            "description": "Computes volumetric fraction of clay."
        },
        {
            "name": "volumetricFractionSilt",
            "description": "Computes volumetric fraction of silt."
        },
        {
            "name": "volumetricFractionSand",
            "description": "Computes volumetric fraction of sand."
        },
        {
            "name": "kelvinT",
            "description": "Converts Celsius to Kelvin."
        },
        {
            "name": "Divide",
            "description": "Safe division with error value fallback."
        },
        {
            "name": "Sum",
            "description": "Sums array segment ignoring MissingValue."
        },
        {
            "name": "volumetricSpecificHeat",
            "description": "Returns volumetric specific heat for a constituent."
        },
        {
            "name": "volumetricFractionAir",
            "description": "Computes volumetric fraction of air as the remaining fraction."
        },
        {
            "name": "airDensity",
            "description": "Computes air density from temperature and pressure."
        },
        {
            "name": "longWaveRadn",
            "description": "Computes longwave radiation given emissivity and temperature."
        },
        {
            "name": "mapLayer2Node",
            "description": "Maps layer-centered values to node-centered values by linear interpolation."
        },
        {
            "name": "ThermalConductance",
            "description": "Returns thermal conductance proxy; in this implementation returns volumetric specific heat for given constituent."
        },
        {
            "name": "shapeFactor",
            "description": "Returns shape factor proxy; in this implementation returns volumetric specific heat for given constituent except special-cased ice/air/minerals."
        },
        {
            "name": "doUpdate",
            "description": "Updates min/max/average soil temperatures and aggregates boundary layer conductance."
        },
        {
            "name": "doThomas",
            "description": "Thomas algorithm to solve tridiagonal heat diffusion system and update temperatures."
        },
        {
            "name": "getBoundaryLayerConductance",
            "description": "Calculates boundary layer conductance using Monin-Obukhov similarity including radiative term."
        },
        {
            "name": "interpolateNetRadiation",
            "description": "Interpolates net radiation at soil surface for an internal time step."
        },
        {
            "name": "interpolateTemperature",
            "description": "Interpolates intra-day air temperature using sinusoidal diurnal cycle."
        },
        {
            "name": "doThermalConductivity",
            "description": "Computes effective thermal conductivity by mixing constituents and mapping to nodes."
        },
        {
            "name": "doVolumetricSpecificHeat",
            "description": "Computes effective volumetric specific heat and maps to nodes."
        },
        {
            "name": "Zero",
            "description": "Returns a zero-filled array with same length as input."
        },
        {
            "name": "doNetRadiation",
            "description": "Distributes daily solar radiation over internal steps and estimates cloud fraction and vapour parameter."
        },
        {
            "name": "doProcess",
            "description": "Runs intra-day loop: updates air temperature, net radiation, BL conductance, solves heat diffusion, updates diagnostics."
        },
        {
            "name": "ToCumThickness",
            "description": "Computes cumulative thicknesses from layer thicknesses."
        },
        {
            "name": "calcSoilTemperature",
            "description": "Initializes soil temperature profile using annual sinusoidal solution."
        },
        {
            "name": "calcSurfaceTemperature",
            "description": "Estimates surface temperature from mean/max air temperature and albedo."
        },
        {
            "name": "ValuesInArray",
            "description": "Checks whether an array contains any non-missing values."
        }
    ],
    "tests": [
        {
            "name": "-",
            "description": "-",
            "inputs": [],
            "outputs": []
        }
    ],
    "comments": [
        {
            "comment": "State variables are treated as both inputs and outputs where they are persisted across steps. For example, soilTemp, internalTimeStep, and doInitialisationStuff are passed in and returned by model_soiltemperature."
        },
        {
            "comment": "Some inputs (e.g., instrumHeight, pInitialValues, defaultInstrumentHeight) are present in signatures but may be unused in the main process depending on configuration; they are still documented per the instructions."
        },
        {
            "comment": "Units are inferred from code context where possible (e.g., timestep in seconds, thickness in mm, nodeDepth in m). Many physical parameters (e.g., conductances) lack explicit units in the code and are marked with '-'."
        },
        {
            "comment": "The return tuple from model_soiltemperature contains duplicate variables (netRadiation, maxTempYesterday, minTempYesterday, airTemperature, boundaryLayerConductance) for parity; outputs list de-duplicates by name."
        },
        {
            "comment": "ThermalConductance and shapeFactor functions return volumetricSpecificHeat for most cases as per the current implementation; this mirrors a preserved behavior in the source."
        }
    ]
}