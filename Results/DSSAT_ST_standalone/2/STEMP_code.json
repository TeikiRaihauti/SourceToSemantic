{
    "init": {
        "name": "STEMP_Initialize"
    },
    "process": {
        "name": "STEMP",
        "description": "Daily soil temperature process (RATE)."
    },
    "inputs": [
        {
            "name": "ISWITCH_ISWWAT",
            "description": "Flag for soil water simulation ('Y' to use simulated water; otherwise use DUL).",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "CHAR",
            "len": "-",
            "min": "-",
            "max": "-",
            "default": "-",
            "unit": "-",
            "uri": "-"
        },
        {
            "name": "SOILPROP_BD",
            "description": "Bulk density by layer.",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "DOUBLELIST",
            "len": "SOILPROP_NLAYR",
            "min": "-",
            "max": "-",
            "default": "-",
            "unit": "g/cm3",
            "uri": "-"
        },
        {
            "name": "SOILPROP_DS",
            "description": "Cumulative depth to layer bottom by layer.",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "DOUBLELIST",
            "len": "SOILPROP_NLAYR",
            "min": "-",
            "max": "-",
            "default": "-",
            "unit": "cm",
            "uri": "-"
        },
        {
            "name": "SOILPROP_DUL",
            "description": "Drained upper limit (volumetric fraction) by layer.",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "DOUBLELIST",
            "len": "SOILPROP_NLAYR",
            "min": "-",
            "max": "-",
            "default": "-",
            "unit": "vol.frac",
            "uri": "-"
        },
        {
            "name": "SOILPROP_LL",
            "description": "Lower limit (volumetric fraction) by layer.",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "DOUBLELIST",
            "len": "SOILPROP_NLAYR",
            "min": "-",
            "max": "-",
            "default": "-",
            "unit": "vol.frac",
            "uri": "-"
        },
        {
            "name": "SOILPROP_NLAYR",
            "description": "Number of soil layers.",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "INT",
            "len": "-",
            "min": "1",
            "max": "-",
            "default": "-",
            "unit": "-",
            "uri": "-"
        },
        {
            "name": "SOILPROP_MSALB",
            "description": "Soil/mulch albedo used in temperature calculations.",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "0",
            "max": "1",
            "default": "-",
            "unit": "-",
            "uri": "-"
        },
        {
            "name": "SRAD",
            "description": "Daily solar radiation (not used directly by core equations).",
            "inputtype": "variable",
            "category": "exogenous",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "0",
            "max": "-",
            "default": "-",
            "unit": "MJ/m2/d",
            "uri": "-"
        },
        {
            "name": "SW",
            "description": "Soil water content by layer (volumetric fraction).",
            "inputtype": "variable",
            "category": "exogenous",
            "datatype": "DOUBLELIST",
            "len": "SOILPROP_NLAYR",
            "min": "0",
            "max": "1",
            "default": "-",
            "unit": "vol.frac",
            "uri": "-"
        },
        {
            "name": "TAVG",
            "description": "Daily average air temperature.",
            "inputtype": "variable",
            "category": "exogenous",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "-",
            "max": "-",
            "default": "-",
            "unit": "C",
            "uri": "-"
        },
        {
            "name": "TMAX",
            "description": "Daily maximum air temperature (not used directly).",
            "inputtype": "variable",
            "category": "exogenous",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "-",
            "max": "-",
            "default": "-",
            "unit": "C",
            "uri": "-"
        },
        {
            "name": "XLAT",
            "description": "Latitude; sign used to set hottest day in initialization.",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "-90",
            "max": "90",
            "default": "-",
            "unit": "deg",
            "uri": "-"
        },
        {
            "name": "TAV",
            "description": "Annual average air temperature.",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "-",
            "max": "-",
            "default": "-",
            "unit": "C",
            "uri": "-"
        },
        {
            "name": "TAMP",
            "description": "Annual temperature amplitude.",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "0",
            "max": "-",
            "default": "-",
            "unit": "C",
            "uri": "-"
        },
        {
            "name": "CONTROL_YRDOY",
            "description": "Date as YYYYDOY integer.",
            "inputtype": "variable",
            "category": "exogenous",
            "datatype": "INT",
            "len": "-",
            "min": "-",
            "max": "-",
            "default": "-",
            "unit": "YYYYDOY",
            "uri": "-"
        },
        {
            "name": "SOILPROP_DLAYR",
            "description": "Soil layer thickness by layer.",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "DOUBLELIST",
            "len": "SOILPROP_NLAYR",
            "min": "0",
            "max": "-",
            "default": "-",
            "unit": "cm",
            "uri": "-"
        },
        {
            "name": "CUMDPT",
            "description": "Cumulative profile depth.",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "0",
            "max": "-",
            "default": "-",
            "unit": "mm",
            "uri": "-"
        },
        {
            "name": "DSMID",
            "description": "Depth to mid-point of each layer.",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "DOUBLELIST",
            "len": "SOILPROP_NLAYR",
            "min": "0",
            "max": "-",
            "default": "-",
            "unit": "mm",
            "uri": "-"
        },
        {
            "name": "TDL",
            "description": "Profile sum of DUL*layer_thickness (previous day).",
            "inputtype": "variable",
            "category": "state",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "0",
            "max": "-",
            "default": "-",
            "unit": "cm",
            "uri": "-"
        },
        {
            "name": "TMA",
            "description": "Moving average queue (length 5) of daily TAVG.",
            "inputtype": "variable",
            "category": "state",
            "datatype": "DOUBLELIST",
            "len": "5",
            "min": "-",
            "max": "-",
            "default": "-",
            "unit": "C",
            "uri": "-"
        },
        {
            "name": "ATOT",
            "description": "Sum of TMA queue values.",
            "inputtype": "variable",
            "category": "state",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "-",
            "max": "-",
            "default": "-",
            "unit": "C",
            "uri": "-"
        },
        {
            "name": "SRFTEMP",
            "description": "Surface temperature (previous day).",
            "inputtype": "variable",
            "category": "state",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "-",
            "max": "-",
            "default": "-",
            "unit": "C",
            "uri": "-"
        },
        {
            "name": "ST",
            "description": "Soil temperature by layer (previous day).",
            "inputtype": "variable",
            "category": "state",
            "datatype": "DOUBLELIST",
            "len": "SOILPROP_NLAYR",
            "min": "-",
            "max": "-",
            "default": "-",
            "unit": "C",
            "uri": "-"
        },
        {
            "name": "HDAY",
            "description": "Hottest day-of-year phase anchor.",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "1",
            "max": "366",
            "default": "-",
            "unit": "doy",
            "uri": "-"
        }
    ],
    "outputs": [
        {
            "name": "TDL",
            "description": "Profile sum of DUL*layer_thickness (for the day).",
            "datatype": "DOUBLE",
            "category": "state",
            "len": "-",
            "min": "0",
            "max": "-",
            "default": "-",
            "unit": "cm",
            "uri": "-"
        },
        {
            "name": "TMA",
            "description": "Updated moving average queue (length 5) of TAVG.",
            "datatype": "DOUBLELIST",
            "category": "state",
            "len": "5",
            "min": "-",
            "max": "-",
            "default": "-",
            "unit": "C",
            "uri": "-"
        },
        {
            "name": "ATOT",
            "description": "Updated sum of TMA queue.",
            "datatype": "DOUBLE",
            "category": "state",
            "len": "-",
            "min": "-",
            "max": "-",
            "default": "-",
            "unit": "C",
            "uri": "-"
        },
        {
            "name": "SRFTEMP",
            "description": "Updated surface temperature.",
            "datatype": "DOUBLE",
            "category": "state",
            "len": "-",
            "min": "-",
            "max": "-",
            "default": "-",
            "unit": "C",
            "uri": "-"
        },
        {
            "name": "ST",
            "description": "Updated soil temperature by layer.",
            "datatype": "DOUBLELIST",
            "category": "state",
            "len": "SOILPROP_NLAYR",
            "min": "-",
            "max": "-",
            "default": "-",
            "unit": "C",
            "uri": "-"
        }
    ],
    "functions": [
        {
            "name": "YR_DOY",
            "description": "Convert YYYYDOY integer to (year, day-of-year)."
        },
        {
            "name": "_nint",
            "description": "Fortran-like nearest-integer (NINT), halves away from zero."
        },
        {
            "name": "_round_nint_decimals",
            "description": "Fortran-like rounding using NINT at specified decimals."
        },
        {
            "name": "SOILT",
            "description": "Soil temperature by layer (daily) core calculation called by STEMP."
        }
    ],
    "tests": [
        {
            "name": "-",
            "description": "-",
            "inputs": [
                {
                    "name": "-",
                    "value": "-"
                }
            ],
            "outputs": [
                {
                    "name": "-",
                    "value": "-"
                }
            ]
        }
    ],
    "comments": [
        {
            "comment": "STEMP is treated as the main process; SOILT is a supporting function implementing the core layer-temperature computation. CUMDPT, DSMID, and HDAY are produced during initialization and treated as constant parameters during the daily process. State variables are TDL, TMA, ATOT, SRFTEMP, and ST (each appears as both input and output of STEMP). SRAD, TMAX, and XLAT appear in signatures but are not used in the core equations; they are still documented as inputs. Units for some soil properties (e.g., BD) are inferred from common practice; where uncertain, '-' is used."
        }
    ]
}