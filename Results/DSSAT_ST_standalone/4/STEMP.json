{
    "metadata": {
        "Title": "STEMP (Soil Temperature Subroutine)",
        "Authors": "DSSAT (DSSAT Florida)",
        "Institution": "University of Georgia; University of Florida; Iowa State University; International Center for Soil Fertility and Agricultural Development; University of Guelph",
        "URI": "",
        "DOI": "https://doi.org/10.2134/agronj1994.00021962008600060014x",
        "Extended description": "Calculates soil temperature by layer using a damping-depth approach (Parton-Logan style) with inputs from soil properties, soil water and recent temperatures. Includes initialization (seasonal) and daily rate updates and calls SOILT to compute layer temperatures and surface litter temperature.",
        "Short description": "Determines soil temperature by layer",
        "Model version": "1.0"
    },
    "init": {
        "name": "STEMP",
        "firstLine": "SWI = SW",
        "lastLine": "END DO"
    },
    "process": {
        "name": "STEMP",
        "description": "Top-level subroutine orchestrating soil temperature calculation (initialization, daily rate) and calling SOILT to compute layer temperatures and surface temperature.",
        "firstLine": "TBD = 0.0",
        "lastLine": "ATOT, TMA, SRFTEMP, ST)                     !Output"
    },
    "inputs": [
        {
            "name": "CONTROL_DYNAMIC",
            "description": "Control variable indicating dynamic mode (RUNINIT, SEASINIT, RATE, OUTPUT, etc.)",
            "inputtype": "variable",
            "category": "auxiliary",
            "datatype": "INT",
            "len": "-",
            "min": "",
            "max": "",
            "default": "",
            "unit": "",
            "uri": ""
        },
        {
            "name": "ISWITCH_ISWWAT",
            "description": "Water simulation control switch ('Y' or 'N')",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "CHAR",
            "len": "1",
            "min": "",
            "max": "",
            "default": "",
            "unit": "",
            "uri": ""
        },
        {
            "name": "SOILPROP_BD",
            "description": "Bulk density by soil layer (g soil / cm3 soil)",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "DOUBLEARRAY",
            "len": "NL",
            "min": "",
            "max": "",
            "default": "",
            "unit": "g/cm3",
            "uri": ""
        },
        {
            "name": "SOILPROP_DLAYR",
            "description": "Thickness of soil layer L (cm)",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "DOUBLEARRAY",
            "len": "NL",
            "min": "",
            "max": "",
            "default": "",
            "unit": "cm",
            "uri": ""
        },
        {
            "name": "SOILPROP_DS",
            "description": "Cumulative depth in soil layer L (cm)",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "DOUBLEARRAY",
            "len": "NL",
            "min": "",
            "max": "",
            "default": "",
            "unit": "cm",
            "uri": ""
        },
        {
            "name": "SOILPROP_DUL",
            "description": "Volumetric soil water content at Drained Upper Limit in layer L (cm3 water / cm3 soil)",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "DOUBLEARRAY",
            "len": "NL",
            "min": "",
            "max": "",
            "default": "",
            "unit": "cm3/cm3",
            "uri": ""
        },
        {
            "name": "SOILPROP_LL",
            "description": "Volumetric soil water content in layer L at lower limit (cm3 water / cm3 soil)",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "DOUBLEARRAY",
            "len": "NL",
            "min": "",
            "max": "",
            "default": "",
            "unit": "cm3/cm3",
            "uri": ""
        },
        {
            "name": "SOILPROP_NLAYR",
            "description": "Actual number of soil layers",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "INT",
            "len": "-",
            "min": "1",
            "max": "",
            "default": "",
            "unit": "layers",
            "uri": ""
        },
        {
            "name": "SOILPROP_MSALB",
            "description": "Soil albedo with mulch and soil water effects (dimensionless)",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "0.0",
            "max": "1.0",
            "default": "",
            "unit": "dimensionless",
            "uri": ""
        },
        {
            "name": "SRAD",
            "description": "Solar radiation",
            "inputtype": "variable",
            "category": "exogenous",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "",
            "max": "",
            "default": "",
            "unit": "MJ/m2-d",
            "uri": ""
        },
        {
            "name": "SW",
            "description": "Volumetric soil water content in each layer (cm3 water / cm3 soil)",
            "inputtype": "variable",
            "category": "state",
            "datatype": "DOUBLEARRAY",
            "len": "NL",
            "min": "0.0",
            "max": "1.0",
            "default": "",
            "unit": "cm3/cm3",
            "uri": ""
        },
        {
            "name": "TAVG",
            "description": "Average daily temperature",
            "inputtype": "variable",
            "category": "exogenous",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "",
            "max": "",
            "default": "",
            "unit": "degC",
            "uri": ""
        },
        {
            "name": "TMAX",
            "description": "Maximum daily temperature",
            "inputtype": "variable",
            "category": "exogenous",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "",
            "max": "",
            "default": "",
            "unit": "degC",
            "uri": ""
        },
        {
            "name": "XLAT",
            "description": "Latitude",
            "inputtype": "parameter",
            "category": "constant",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "-90.0",
            "max": "90.0",
            "default": "",
            "unit": "degrees",
            "uri": ""
        },
        {
            "name": "TAV",
            "description": "Average annual soil temperature",
            "inputtype": "variable",
            "category": "exogenous",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "",
            "max": "",
            "default": "",
            "unit": "degC",
            "uri": ""
        },
        {
            "name": "TAMP",
            "description": "Amplitude of temperature function used to calculate soil temperatures",
            "inputtype": "variable",
            "category": "exogenous",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "",
            "max": "",
            "default": "",
            "unit": "degC",
            "uri": ""
        },
        {
            "name": "CUMDPT",
            "description": "Cumulative depth of soil profile",
            "inputtype": "variable",
            "category": "state",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "0.0",
            "max": "",
            "default": "",
            "unit": "mm",
            "uri": ""
        },
        {
            "name": "DSMID",
            "description": "Depth to midpoint of soil layer",
            "inputtype": "variable",
            "category": "state",
            "datatype": "DOUBLEARRAY",
            "len": "NL",
            "min": "",
            "max": "",
            "default": "",
            "unit": "cm",
            "uri": ""
        },
        {
            "name": "TDL",
            "description": "Total water content of soil at drained upper limit (profile sum)",
            "inputtype": "variable",
            "category": "state",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "0.0",
            "max": "",
            "default": "",
            "unit": "cm",
            "uri": ""
        },
        {
            "name": "TMA",
            "description": "Array of previous 5 days of average soil temperatures",
            "inputtype": "variable",
            "category": "state",
            "datatype": "DOUBLEARRAY",
            "len": "5",
            "min": "",
            "max": "",
            "default": "",
            "unit": "degC",
            "uri": ""
        },
        {
            "name": "ATOT",
            "description": "Sum of TMA array (last 5 days soil temperature)",
            "inputtype": "variable",
            "category": "state",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "",
            "max": "",
            "default": "",
            "unit": "degC",
            "uri": ""
        },
        {
            "name": "DOY",
            "description": "Day of year",
            "inputtype": "variable",
            "category": "exogenous",
            "datatype": "INT",
            "len": "-",
            "min": "1",
            "max": "366",
            "default": "",
            "unit": "day",
            "uri": ""
        },
        {
            "name": "PESW",
            "description": "Potential extractable soil water (summed over root depth) used in temperature water correction (cm)",
            "inputtype": "variable",
            "category": "auxiliary",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "0.0",
            "max": "",
            "default": "",
            "unit": "cm",
            "uri": ""
        },
        {
            "name": "ALBEDO",
            "description": "Surface albedo used in soil temperature computation (dimensionless)",
            "inputtype": "variable",
            "category": "auxiliary",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "0.0",
            "max": "1.0",
            "default": "",
            "unit": "dimensionless",
            "uri": ""
        },
        {
            "name": "B",
            "description": "Exponential decay factor used in damping depth calculation",
            "inputtype": "variable",
            "category": "auxiliary",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "",
            "max": "",
            "default": "",
            "unit": "",
            "uri": ""
        },
        {
            "name": "DP",
            "description": "Damping depth (derived) used in temperature attenuation (mm)",
            "inputtype": "variable",
            "category": "auxiliary",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "",
            "max": "",
            "default": "",
            "unit": "mm",
            "uri": ""
        },
        {
            "name": "HDAY",
            "description": "Day of year of warmest season peak used to set phase (hottest day)",
            "inputtype": "variable",
            "category": "auxiliary",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "1",
            "max": "366",
            "default": "",
            "unit": "day",
            "uri": ""
        },
        {
            "name": "WW",
            "description": "Derived volumetric water-related factor used in damping calculation (dimensionless)",
            "inputtype": "variable",
            "category": "auxiliary",
            "datatype": "DOUBLE",
            "len": "-",
            "min": "",
            "max": "",
            "default": "",
            "unit": "dimensionless",
            "uri": ""
        }
    ],
    "outputs": [
        {
            "name": "CUMDPT",
            "description": "Cumulative depth of soil profile",
            "datatype": "DOUBLE",
            "category": "state",
            "len": "-",
            "min": "",
            "max": "",
            "default": "",
            "unit": "mm",
            "uri": ""
        },
        {
            "name": "DSMID",
            "description": "Depth to midpoint of soil layer",
            "datatype": "DOUBLEARRAY",
            "category": "state",
            "len": "NL",
            "min": "",
            "max": "",
            "default": "",
            "unit": "cm",
            "uri": ""
        },
        {
            "name": "TDL",
            "description": "Total water content of soil at drained upper limit (profile sum)",
            "datatype": "DOUBLE",
            "category": "state",
            "len": "-",
            "min": "",
            "max": "",
            "default": "",
            "unit": "cm",
            "uri": ""
        },
        {
            "name": "TMA",
            "description": "Array of previous 5 days of average soil temperatures (updated)",
            "datatype": "DOUBLEARRAY",
            "category": "state",
            "len": "5",
            "min": "",
            "max": "",
            "default": "",
            "unit": "degC",
            "uri": ""
        },
        {
            "name": "ATOT",
            "description": "Sum of TMA array (updated)",
            "datatype": "DOUBLE",
            "category": "state",
            "len": "-",
            "min": "",
            "max": "",
            "default": "",
            "unit": "degC",
            "uri": ""
        },
        {
            "name": "SRFTEMP",
            "description": "Surface litter/soil temperature",
            "datatype": "DOUBLE",
            "category": "state",
            "len": "-",
            "min": "",
            "max": "",
            "default": "",
            "unit": "degC",
            "uri": ""
        },
        {
            "name": "ST",
            "description": "Soil temperature in each soil layer",
            "datatype": "DOUBLEARRAY",
            "category": "state",
            "len": "NL",
            "min": "",
            "max": "",
            "default": "",
            "unit": "degC",
            "uri": ""
        }
    ],
    "functions": [
        {
            "name": "SOILT",
            "description": "Computes soil temperature profile by layer (ST) and surface temperature (SRFTEMP) using albedo, damping depth and corrected soil water content; called by STEMP."
        }
    ],
    "tests": [
        {
            "name": "ASKEE",
            "description": "Standalone program that initializes CONTROL, ISWITCH, SOILPROP and weather/soil inputs and calls STEMP across dynamic steps (used as a test/harness).",
            "inputs": [
                {
                    "name": "CONTROL%DYNAMIC",
                    "value": "1"
                },
                {
                    "name": "CONTROL%RUN",
                    "value": "1"
                },
                {
                    "name": "CONTROL%RNMODE",
                    "value": "B"
                },
                {
                    "name": "CONTROL%YRDOY",
                    "value": "2021100"
                },
                {
                    "name": "ISWITCH%ISWWAT",
                    "value": "Y"
                },
                {
                    "name": "SOILPROP%BD",
                    "value": "1.6"
                },
                {
                    "name": "SOILPROP%DLAYR",
                    "value": "10.0"
                },
                {
                    "name": "SOILPROP%DS(1)",
                    "value": "10.0"
                },
                {
                    "name": "SOILPROP%DS(2)",
                    "value": "20.0"
                },
                {
                    "name": "SOILPROP%DS(3)",
                    "value": "30.0"
                },
                {
                    "name": "SOILPROP%DS(4)",
                    "value": "40.0"
                },
                {
                    "name": "SOILPROP%DUL",
                    "value": "0.3"
                },
                {
                    "name": "SOILPROP%LL",
                    "value": "0.2"
                },
                {
                    "name": "SOILPROP%NLAYR",
                    "value": "4"
                },
                {
                    "name": "SOILPROP%MSALB",
                    "value": "0.13"
                },
                {
                    "name": "SRAD",
                    "value": "20.0"
                },
                {
                    "name": "SW",
                    "value": "0.2"
                },
                {
                    "name": "TAVG",
                    "value": "25.0"
                },
                {
                    "name": "TMAX",
                    "value": "30.0"
                },
                {
                    "name": "XLAT",
                    "value": "28.0"
                },
                {
                    "name": "TAV",
                    "value": "20.0"
                },
                {
                    "name": "TAMP",
                    "value": "10.0"
                }
            ],
            "outputs": [
                {
                    "name": "SRFTEMP",
                    "value": "-"
                },
                {
                    "name": "ST",
                    "value": "-"
                }
            ]
        }
    ]
}