<?xml version="1.0" ?>
<ModelUnit modelid=".Precipitation ReCalculation (Preciprec)" name="Precipitation ReCalculation (Preciprec)" timestep="1" version="1.0">
	<Description>
		<Title>Precipitation ReCalculation (Preciprec)</Title>
		<Authors>STICS</Authors>
		<Institution>INRA</Institution>
		<URI>-</URI>
		<Reference>http://dx.doi.org/10.1016/j.agrformet.2014.05.002</Reference>
		<ExtendedDescription>Daily routine that recalculates precipitation to close the snowpack mass balance. Starting from observed precipitation (precip), it adjusts for changes in snow water equivalent inferred from snow depth and density and for refreezing and snowfall. If total snow water (Sdry + Swet) is less than the previous day (Sdry_t1 + Swet_t1), a correction ((Sdepth_t1 - Sdepth) * rho) - Mrf is added; finally, snowfall accumulation (Snowaccu) is subtracted: preciprec = precip [+ correction if condition] - Snowaccu.</ExtendedDescription>
		<ShortDescription>Recalculates daily precipitation by accounting for snowpack changes, refreezing, and snowfall accumulation.</ShortDescription>
	</Description>
	<Inputs>
		<Input name="Sdry_t1" description="water in solid state in the snow cover in previous day" inputtype="variable" variablecategory="state" datatype="DOUBLE" max="500.0" min="0.0" default="0.0" unit="mmW" uri="-"/>
		<Input name="Sdry" description="water in solid state in the snow cover" inputtype="variable" variablecategory="state" datatype="DOUBLE" max="500.0" min="0.0" default="0.0" unit="mmW" uri="-"/>
		<Input name="Swet" description="water in liquid state in the snow cover" inputtype="variable" variablecategory="state" datatype="DOUBLE" max="100.0" min="0.0" default="0.0" unit="mmW" uri="-"/>
		<Input name="Swet_t1" description="water in liquid state in the snow cover in previous day" inputtype="variable" variablecategory="state" datatype="DOUBLE" max="100.0" min="0.0" default="0.0" unit="mmW" uri="-"/>
		<Input name="Sdepth_t1" description="snow cover depth in previous day" inputtype="variable" variablecategory="state" datatype="DOUBLE" max="5000.0" min="0.0" default="0.0" unit="m" uri="-"/>
		<Input name="Sdepth" description="snow cover depth" inputtype="variable" variablecategory="state" datatype="DOUBLE" max="5000.0" min="0.0" default="0.0" unit="m" uri="-"/>
		<Input name="Mrf" description="liquid water in the snow cover in the process of refreezing" inputtype="variable" variablecategory="auxiliary" datatype="DOUBLE" max="-" min="-" default="0.0" unit="mmW/d" uri="-"/>
		<Input name="precip" description="current precipitation" inputtype="variable" variablecategory="auxiliary" datatype="DOUBLE" max="5000.0" min="0.0" default="0.0" unit="mmW" uri="-"/>
		<Input name="Snowaccu" description="snowfall accumulation" inputtype="variable" variablecategory="auxiliary" datatype="DOUBLE" max="-" min="-" default="0.0" unit="mmW/d" uri="-"/>
		<Input name="rho" description="The density of the new snow fixed by the user" inputtype="parameter" parametercategory="constant" datatype="DOUBLE" max="-" min="-" default="100.0" unit="kg/m**3" uri="-"/>
	</Inputs>
	<Outputs>
		<Output name="preciprec" description="recalculated precipitation" variablecategory="state" datatype="DOUBLE" max="500.0" min="0.0" unit="mmW" uri="-"/>
	</Outputs>
	<Function name="model_preciprec" description="Compute recalculated precipitation considering snowpack changes, refreezing, and snowfall accumulation." language="cyml" type="external" filename="algo/pyx/model_preciprec.pyx"/>
	<Algorithm language="cyml" platform="" filename="algo/pyx/model_preciprec.pyx"/>
	<Parametersets/>
	<Testsets>
		<Testset name="t_-" description="-">
			<Test name="t_-">
				<OutputValue name="-">-</OutputValue>
			</Test>
		</Testset>
	</Testsets>
</ModelUnit>
